<!-- Enc By : @KyuzuStarboyy -->
<script>document.write(decodeURIComponent(escape(atob('PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImlkIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+VmFuYXRpYyBBaSB8IE5leHQgUGF0Y2ggNS4wLjA8L3RpdGxlPgogICAgPCEtLSBMb2FkIFRhaWx3aW5kIENTUyAtLT4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi50YWlsd2luZGNzcy5jb20iPjwvc2NyaXB0PgogICAgPCEtLSBMb2FkIFBob3NwaG9yIEljb25zIChmb3IgbW9kZXJuIGljb25zKSBhbmQgRm9udCBBd2Vzb21lIChmb3Igc3BlY2lmaWMgaWNvbnMgbGlrZSBUZWxlZ3JhbSkgLS0+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly91bnBrZy5jb20vcGhvc3Bob3ItaWNvbnMiPjwvc2NyaXB0PgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9mb250LWF3ZXNvbWUvNi4wLjAtYmV0YTMvY3NzL2FsbC5taW4uY3NzIj4KICAgIDwhLS0gRm9udCBJbnRlciBmb3IgcHJvZmVzc2lvbmFsIGxvb2sgLS0+CiAgICA8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PUludGVyOndnaHRAMTAwLi45MDAmZGlzcGxheT1zd2FwIiByZWw9InN0eWxlc2hlZXQiPgogICAgPHN0eWxlPgogICAgICAgIDpyb290IHsKICAgICAgICAgICAgLS1jb2xvci1wcmltYXJ5OiAjOGEyYmUyOyAvKiBCbHVlVmlvbGV0IC8gRGVlcCBQdXJwbGUgKi8KICAgICAgICAgICAgLS1jb2xvci1nbG93OiAjZTBiMGZmOyAvKiBMaWdodCBQdXJwbGUgR2xvdyAqLwogICAgICAgICAgICAtLWNvbG9yLWJnLWRhcms6ICMxMjEyMTI7IC8qIERhcmtlciBHcmV5IGZvciBvdXRlciBmcmFtZSAqLwogICAgICAgICAgICAtLWNvbG9yLWJnLWNoYXQ6ICMxYzFjMWM7IC8qIExpZ2h0ZXIgRGFyayBHcmV5IGZvciBjaGF0IGFyZWEgKi8KICAgICAgICAgICAgLS1jb2xvci1iZy1sb2dpbjogIzE0MTQxNDsgLyogU2xpZ2h0bHkgbGVzcyBibGFjayBmb3IgbG9naW4gYXJlYSAqLwogICAgICAgICAgICAtLWNvbG9yLWJ1YmJsZS11c2VyOiAjNGYxODdiOyAvKiBVbmd1IFR1YSAqLwogICAgICAgICAgICAtLWNvbG9yLWJ1YmJsZS1haTogIzJjMmMyYzsgLyogSGl0YW0gVGFwaSBUaWRhayBQZWthdCAvIERhcmsgR3JleSAqLwogICAgICAgIH0KCiAgICAgICAgYm9keSB7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmOwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1iZy1kYXJrKTsKICAgICAgICAgICAgY29sb3I6ICNmM2Y0ZjY7CiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47IC8qIFByZXZlbnQgYm9keSBzY3JvbGxpbmcgKi8KICAgICAgICB9CgogICAgICAgIC8qIEN1c3RvbSBHbG93IEVmZmVjdCBmb3IgQm9yZGVycyBhbmQgVGV4dCAqLwogICAgICAgIC5nbG93LWJvcmRlciB7CiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWNvbG9yLXByaW1hcnkpOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgMTVweCB2YXIoLS1jb2xvci1nbG93KSwgMCAwIDVweCB2YXIoLS1jb2xvci1wcmltYXJ5KSBpbnNldDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMC43NXJlbTsgLyogcm91bmRlZC14bCAqLwogICAgICAgIH0KCiAgICAgICAgLmdsb3ctdGV4dCB7CiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1nbG93KTsKICAgICAgICAgICAgdGV4dC1zaGFkb3c6IDAgMCA4cHggdmFyKC0tY29sb3ItZ2xvdyk7CiAgICAgICAgfQoKICAgICAgICAuZ2xvdy1idXR0b24gewogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxNXB4IHJnYmEoMTM4LCA0MywgMjI2LCAwLjQpOwogICAgICAgIH0KICAgICAgICAuZ2xvdy1idXR0b246aG92ZXIgewogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAyMHB4IHJnYmEoMTM4LCA0MywgMjI2LCAwLjgpOwogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTFweCk7CiAgICAgICAgfQoKICAgICAgICAvKiBDdXN0b20gaW5wdXQgYmFja2dyb3VuZCBpbWFnZSBzdHlsZSAqLwogICAgICAgIC5pbnB1dC1iZyB7CiAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnaHR0cHM6Ly9sLnRvcDR0b3AuaW8vcF8zNTk3ZnhhM3cxLmpwZycpOwogICAgICAgICAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyOwogICAgICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7CiAgICAgICAgICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7CiAgICAgICAgICAgIGZpbHRlcjogYnJpZ2h0bmVzcygwLjYpIG9wYWNpdHkoMC44KTsgLyogRGFya2VuIGFuZCBzZW1pLXRyYW5zcGFyZW50IGZvciByZWFkYWJpbGl0eSAqLwogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgIHRvcDogMDsKICAgICAgICAgICAgbGVmdDogMDsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMC43NXJlbTsKICAgICAgICAgICAgei1pbmRleDogLTE7CiAgICAgICAgfQoKICAgICAgICAvKiBDdXN0b21pemUgc2Nyb2xsYmFyIGZvciBkYXJrIHRoZW1lICovCiAgICAgICAgI2NoYXQtc2Nyb2xsLXdyYXBwZXI6Oi13ZWJraXQtc2Nyb2xsYmFyIHsKICAgICAgICAgICAgd2lkdGg6IDhweDsKICAgICAgICB9CgogICAgICAgICNjaGF0LXNjcm9sbC13cmFwcGVyOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnkpOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4OwogICAgICAgIH0KCiAgICAgICAgI2NoYXQtc2Nyb2xsLXdyYXBwZXI6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItYmctZGFyayk7CiAgICAgICAgfQoKICAgICAgICAvKiBTcGVjaWZpYyBzdHlsZSBmb3IgZnVsbCBiYW5uZXIgb24gMTBzIHNwbGFzaCAtIG5vdyBjb25zdHJhaW5lZCBieSB0aGUgcGFyZW50IGNvbnRhaW5lciBtYXgtdy1sZyAqLwogICAgICAgICNzcGxhc2gtYmFubmVyIHsKICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlOwogICAgICAgICAgICBoZWlnaHQ6IGF1dG87CiAgICAgICAgICAgIG9iamVjdC1maXQ6IGNvbnRhaW47CiAgICAgICAgfQoKICAgICAgICAvKiBBcHBseSB0aGUgbmV3IGNoYXQgYmFja2dyb3VuZCBjb2xvciAqLwogICAgICAgICNjaGF0LXNjcm9sbC13cmFwcGVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItYmctY2hhdCk7IC8qICMxYzFjMWMgKi8KICAgICAgICB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5IGNsYXNzPSJtaW4taC1zY3JlZW4gZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIiPgoKICAgIDwhLS0gRmlyZWJhc2UgU0RLIEltcG9ydHMgKE1VU1QgdXNlIHRoZSBnbG9iYWwgdmFyaWFibGVzKSAtLT4KICAgIDxzY3JpcHQgdHlwZT0ibW9kdWxlIj4KICAgICAgICBpbXBvcnQgeyBpbml0aWFsaXplQXBwIH0gZnJvbSAiaHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vZmlyZWJhc2Vqcy8xMS42LjEvZmlyZWJhc2UtYXBwLmpzIjsKICAgICAgICBpbXBvcnQgeyBnZXRBdXRoLCBzaWduSW5Bbm9ueW1vdXNseSwgc2lnbkluV2l0aEN1c3RvbVRva2VuLCBvbkF1dGhTdGF0ZUNoYW5nZWQgfSBmcm9tICJodHRwczovL3d3dy5nc3RhdGljLmNvbS9maXJlYmFzZWpzLzExLjYuMS9maXJlYmFzZS1hdXRoLmpzIjsKICAgICAgICBpbXBvcnQgeyBnZXRGaXJlc3RvcmUsIGRvYywgZ2V0RG9jLCBzZXREb2MsIHVwZGF0ZURvYywgb25TbmFwc2hvdCB9IGZyb20gImh0dHBzOi8vd3d3LmdzdGF0aWMuY29tL2ZpcmViYXNlanMvMTEuNi4xL2ZpcmViYXNlLWZpcmVzdG9yZS5qcyI7CiAgICAgICAgaW1wb3J0IHsgc2V0TG9nTGV2ZWwgfSBmcm9tICJodHRwczovL3d3dy5nc3RhdGljLmNvbS9maXJlYmFzZWpzLzExLjYuMS9maXJlYmFzZS1maXJlc3RvcmUuanMiOwoKICAgICAgICAvLyBHbG9iYWwgRmlyZWJhc2UgVmFyaWFibGVzIChNYW5kYXRvcnkgdXNlIG9mIHByb3ZpZGVkIGdsb2JhbHMpCiAgICAgICAgY29uc3QgYXBwSWQgPSB0eXBlb2YgX19hcHBfaWQgIT09ICd1bmRlZmluZWQnID8gX19hcHBfaWQgOiAndmFuYXRpYy1haS1kZWZhdWx0LWFwcC1pZCc7CiAgICAgICAgY29uc3QgZmlyZWJhc2VDb25maWcgPSB0eXBlb2YgX19maXJlYmFzZV9jb25maWcgIT09ICd1bmRlZmluZWQnID8gSlNPTi5wYXJzZShfX2ZpcmViYXNlX2NvbmZpZykgOiBudWxsOwogICAgICAgIGNvbnN0IGluaXRpYWxBdXRoVG9rZW4gPSB0eXBlb2YgX19pbml0aWFsX2F1dGhfdG9rZW4gIT09ICd1bmRlZmluZWQnID8gX19pbml0aWFsX2F1dGhfdG9rZW4gOiBudWxsOwoKICAgICAgICBsZXQgZGIsIGF1dGgsIHVzZXJJZCA9IG51bGw7CiAgICAgICAgbGV0IGFwcFN0YXRlID0gewogICAgICAgICAgICBjdXJyZW50U2NyZWVuOiAnc3BsYXNoXzEwcycsCiAgICAgICAgICAgIHVzZXJEYXRhOiB7CiAgICAgICAgICAgICAgICB1c2VybmFtZTogJycsCiAgICAgICAgICAgICAgICAvLyBBUEkgS2V5IHBsYWNlaG9sZGVyIC0gd2lsbCB1c2UgdGhlIGFjdHVhbCBrZXkgaW4gZmV0Y2ggYnV0IHJlbHkgb24gdGhpcyBmb3IgdXNlciB2YWxpZGF0aW9uCiAgICAgICAgICAgICAgICBhcGlLZXk6ICdBSXphU3lEZWZhdWx0S2V5TW9jaycsIAogICAgICAgICAgICAgICAgbmFtYUFpOiAnJywKICAgICAgICAgICAgICAgIHVtdXJQZW5nZ3VuYTogJycsCiAgICAgICAgICAgICAgICBiYkNvaW46IDAsCiAgICAgICAgICAgICAgICBtYXhCYkNvaW46IDEwLAogICAgICAgICAgICAgICAgbGFzdFJlc2V0VGltZTogMCwKICAgICAgICAgICAgICAgIG1vZGU6ICdDb21iYWNrJywKICAgICAgICAgICAgICAgIHBlbmdndW5hVHlwZTogJ1RlcnZlcmlmaWthc2knIAogICAgICAgICAgICB9LAogICAgICAgICAgICBjaGF0SGlzdG9yeTogW10sCiAgICAgICAgICAgIGFpTW9kZUljb25zOiB7CiAgICAgICAgICAgICAgICAnQ29tYmFjayc6ICdsaWdodG5pbmcnLAogICAgICAgICAgICAgICAgJ1NhbnRhaSc6ICdncmFkdWF0aW9uLWNhcCcsCiAgICAgICAgICAgICAgICAnVG9vbHMgQW5kIEphdmFzY3JpcHQnOiAnY29kZScsCiAgICAgICAgICAgICAgICAnUGVyY2ludGFhbic6ICdoZWFydCcsCiAgICAgICAgICAgICAgICAnU2Vrb2xhaCc6ICdsaWdodGJ1bGItZmlsYW1lbnQnLAogICAgICAgICAgICAgICAgJ0p1c3QgS2lkZGluZyc6ICdzbWlsZXknLAogICAgICAgICAgICAgICAgJ0FzdHJvbm9taSc6ICdzYXR1cm4nLAogICAgICAgICAgICAgICAgJ0ltYWdlIEVkaWF0b3InOiAnY2FtZXJhJywKICAgICAgICAgICAgICAgICdHYW1lJzogJ2dhbWUtY29udHJvbGxlcicsCiAgICAgICAgICAgICAgICAnSGVscCBXaGF0c0FwcCc6ICd3aGF0c2FwcC1sb2dvJwogICAgICAgICAgICB9LAogICAgICAgICAgICBzZXJ2ZXJTdGF0dXM6IGAke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDUpICsgMX1tcyBQaW5nYAogICAgICAgIH07CgogICAgICAgIC8vIC0tLSBDb25zdGFudHMgLS0tCiAgICAgICAgY29uc3QgTUFYX0JCX0NPSU5fREVGQVVMVCA9IDEwOwogICAgICAgIGNvbnN0IEtZVVpVX1VTRVJOQU1FID0gJ0t5dXp1JzsKICAgICAgICBjb25zdCBLWVVaVV9BUElfS0VZX0lOUFVUID0gJ0t5dXp1TWVtayc7CiAgICAgICAgLy8gTm90ZTogVGhlIGFjdHVhbCBrZXkgaXMgbW9ja2VkIGhlcmUsIGJ1dCB0aGUgZW52aXJvbm1lbnQgd2lsbCBpbmplY3QgdGhlIHJlYWwgb25lLgogICAgICAgIGNvbnN0IEtZVVpVX0FQSV9LRVlfUkVBTCA9ICdBSXphU3lCc3AtQlhaTDM1cVY2aTVHTkR2Y1JhcWdtSFhqbTV4SW8nOyAKICAgICAgICBjb25zdCBSRVNFVF9USU1FX01TID0gMiAqIDYwICogNjAgKiAxMDAwOyAvLyAyIGhvdXJzIGluIG1pbGxpc2Vjb25kcwoKICAgICAgICBjb25zdCBBUElfS0VZX01BUCA9IHsKICAgICAgICAgICAgW0tZVVpVX0FQSV9LRVlfSU5QVVRdOiBLWVVaVV9BUElfS0VZX1JFQUwsCiAgICAgICAgICAgICdkZWZhdWx0a2V5JzogJ0FJemFTeURlZmF1bHRLZXlNb2NrJywgCiAgICAgICAgfTsKICAgICAgICAKICAgICAgICBjb25zdCBHRU1JTklfTU9ERUwgPSAnZ2VtaW5pLTIuNS1mbGFzaC1wcmV2aWV3LTA5LTIwMjUnOwogICAgICAgIGNvbnN0IEdFTUlOSV9BUElfVVJMID0gYGh0dHBzOi8vZ2VuZXJhdGl2ZWxhbmd1YWdlLmdvb2dsZWFwaXMuY29tL3YxYmV0YS9tb2RlbHMvJHtHRU1JTklfTU9ERUx9OmdlbmVyYXRlQ29udGVudD9rZXk9YDsKICAgICAgICAKICAgICAgICAvLyAtLS0gTXVzaWMgUGxheWJhY2sgVmFyaWFibGVzIChORVcpIC0tLQogICAgICAgIGxldCBpc011c2ljTW9kZSA9IGZhbHNlOwogICAgICAgIGxldCBpc1BsYXlpbmcgPSBmYWxzZTsKICAgICAgICBsZXQgcHJlc3NUaW1lciA9IG51bGw7CiAgICAgICAgY29uc3QgTE9OR19QUkVTU19EVVJBVElPTiA9IDUwMDsgLy8gbXMKICAgICAgICBjb25zdCBBVURJT19VUkwgPSAnaHR0cHM6Ly9lLnRvcDR0b3AuaW8vbV8zNTk3NDh2dGsxLm1wMyc7CiAgICAgICAgbGV0IGJhY2tncm91bmRBdWRpbyA9IG5ldyBBdWRpbyhBVURJT19VUkwpOwoKICAgICAgICAvLyAtLS0gVXRpbGl0eSBGdW5jdGlvbnMgLS0tCiAgICAgICAgY29uc3QgZ2V0TW9kZUljb24gPSAobW9kZSkgPT4gewogICAgICAgICAgICBjb25zdCBpY29uTmFtZSA9IGFwcFN0YXRlLmFpTW9kZUljb25zW21vZGVdOwogICAgICAgICAgICBpZiAoIWljb25OYW1lKSByZXR1cm4gJ3F1ZXN0aW9uJzsKICAgICAgICAgICAgY29uc3QgaWNvbk1hcHBpbmcgPSB7CiAgICAgICAgICAgICAgICAnbGlnaHRuaW5nJzogJ3BoLWxpZ2h0bmluZy1maWxsJywKICAgICAgICAgICAgICAgICdncmFkdWF0aW9uLWNhcCc6ICdwaC1ncmFkdWF0aW9uLWNhcC1maWxsJywKICAgICAgICAgICAgICAgICdjb2RlJzogJ3BoLWNvZGUtZmlsbCcsCiAgICAgICAgICAgICAgICAnaGVhcnQnOiAncGgtaGVhcnQtZmlsbCcsCiAgICAgICAgICAgICAgICAnbGlnaHRidWxiLWZpbGFtZW50JzogJ3BoLWxpZ2h0YnVsYi1maWxhbWVudC1maWxsJywKICAgICAgICAgICAgICAgICdzbWlsZXknOiAncGgtc21pbGV5LWZpbGwnLAogICAgICAgICAgICAgICAgJ3NhdHVybic6ICdwaC1wbGFuZXQtZmlsbCcsIAogICAgICAgICAgICAgICAgJ2NhbWVyYSc6ICdwaC1jYW1lcmEtZmlsbCcsCiAgICAgICAgICAgICAgICAnZ2FtZS1jb250cm9sbGVyJzogJ3BoLWdhbWUtY29udHJvbGxlci1maWxsJywKICAgICAgICAgICAgICAgICd3aGF0c2FwcC1sb2dvJzogJ3BoLXdoYXRzYXBwLWxvZ28tZmlsbCcsCiAgICAgICAgICAgICAgICAncXVlc3Rpb24nOiAncGgtcXVlc3Rpb24tZmlsbCcKICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmV0dXJuIGljb25NYXBwaW5nW2ljb25OYW1lXSB8fCBgcGgtJHtpY29uTmFtZX0tZmlsbGA7IC8vIEZhbGxiYWNrIHRvIHBoLWljb25OYW1lLWZpbGwgc3RydWN0dXJlCiAgICAgICAgfTsKCiAgICAgICAgY29uc3Qgc2xlZXAgPSAobXMpID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpOwoKICAgICAgICAvLyBDdXN0b20gUG9wLXVwIChObyBhbGVydCgpIGFsbG93ZWQpCiAgICAgICAgZnVuY3Rpb24gc2hvd0N1c3RvbVBvcHVwKG1lc3NhZ2UsIGR1cmF0aW9uID0gMzAwMCkgewogICAgICAgICAgICBjb25zdCBwb3B1cCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b20tcG9wdXAnKTsKICAgICAgICAgICAgaWYgKCFwb3B1cCkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBjb250ZW50ID0gcG9wdXAucXVlcnlTZWxlY3RvcignI3BvcHVwLWNvbnRlbnQnKTsKICAgICAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICA8aSBjbGFzcz0icGgtc21pbGV5LXgtZmlsbCB0ZXh0LTR4bCB0ZXh0LXJlZC01MDAgZ2xvdy10ZXh0IG1yLTIiPjwvaT4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LWxnIj4ke21lc3NhZ2V9PC9zcGFuPgogICAgICAgICAgICBgOwogICAgICAgICAgICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsKICAgICAgICAgICAgcG9wdXAuY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZS1ib3VuY2UnKTsKCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgcG9wdXAuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7CiAgICAgICAgICAgICAgICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRlLWJvdW5jZScpOwogICAgICAgICAgICB9LCBkdXJhdGlvbik7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8qKgogICAgICAgICAqIE1lbGFrdWthbiBmZXRjaCBkZW5nYW4gZXhwb25lbnRpYWwgYmFja29mZi4KICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFVSTCBBUEkKICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyBPcHNpIGZldGNoCiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFJldHJpZXMgSnVtbGFoIG1ha3NpbWFsIHBlcmNvYmFhbgogICAgICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3BvbnNlPn0gUmVzcG9ucyBmZXRjaAogICAgICAgICAqLwogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGZldGNoV2l0aEJhY2tvZmYodXJsLCBvcHRpb25zLCBtYXhSZXRyaWVzID0gNSkgewogICAgICAgICAgICBmb3IgKGxldCBhdHRlbXB0ID0gMDsgYXR0ZW1wdCA8IG1heFJldHJpZXM7IGF0dGVtcHQrKykgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwgb3B0aW9ucyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDI5KSB7IAogICAgICAgICAgICAgICAgICAgICAgICAvLyBUb28gbWFueSByZXF1ZXN0cyAodGhyb3R0bGluZykKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dGVtcHQgPCBtYXhSZXRyaWVzIC0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVsYXkgPSBNYXRoLnBvdygyLCBhdHRlbXB0KSAqIDEwMDAgKyBNYXRoLnJhbmRvbSgpICogMTAwMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgW0FQSV0gVGhyb3R0bGluZy4gUmV0cnlpbmcgaW4gJHtkZWxheSAvIDEwMDB9cy4uLmApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2xlZXAoZGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIG90aGVyIEhUVFAgZXJyb3JzIGltbWVkaWF0ZWx5CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBUEkgcmV0dXJuZWQgc3RhdHVzICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbQVBJXSBGZXRjaCBhdHRlbXB0ICR7YXR0ZW1wdCArIDF9IGZhaWxlZDpgLCBlcnJvci5tZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICBpZiAoYXR0ZW1wdCA9PT0gbWF4UmV0cmllcyAtIDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJHYWdhbCB0ZXJodWJ1bmcga2UgQVBJIHNldGVsYWggYmViZXJhcGEga2FsaSBwZXJjb2JhYW4uIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlbGF5ID0gTWF0aC5wb3coMiwgYXR0ZW1wdCkgKiAxMDAwICsgTWF0aC5yYW5kb20oKSAqIDUwMDsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBzbGVlcChkZWxheSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJHYWdhbCB0ZXJodWJ1bmcga2UgQVBJIHNldGVsYWggYmViZXJhcGEga2FsaSBwZXJjb2JhYW4uIik7CiAgICAgICAgfQoKICAgICAgICAvLyAtLS0gRmlyZWJhc2UvRmlyZXN0b3JlIExvZ2ljIC0tLQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGluaXRGaXJlYmFzZSgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmIChmaXJlYmFzZUNvbmZpZykgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFwcCA9IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpOwogICAgICAgICAgICAgICAgICAgIGRiID0gZ2V0RmlyZXN0b3JlKGFwcCk7CiAgICAgICAgICAgICAgICAgICAgYXV0aCA9IGdldEF1dGgoYXBwKTsKICAgICAgICAgICAgICAgICAgICBzZXRMb2dMZXZlbCgnZGVidWcnKTsgCgogICAgICAgICAgICAgICAgICAgIC8vIEF1dGhlbnRpY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgaWYgKGluaXRpYWxBdXRoVG9rZW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2lnbkluV2l0aEN1c3RvbVRva2VuKGF1dGgsIGluaXRpYWxBdXRoVG9rZW4pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNpZ25JbkFub255bW91c2x5KGF1dGgpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgb25BdXRoU3RhdGVDaGFuZ2VkKGF1dGgsICh1c2VyKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2VyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQgPSB1c2VyLnVpZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJGaXJlYmFzZSBpbml0aWFsaXplZCBhbmQgdXNlciBzaWduZWQgaW46IiwgdXNlcklkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcHBTdGF0ZS5jdXJyZW50U2NyZWVuID09PSAnc3BsYXNoXzEwcycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHNldFNjcmVlbignbG9naW4nKSwgMTAwMDApOyAvLyAxMHMgZGVsYXkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJVc2VyIGlzIHNpZ25lZCBvdXQgb3IgYW5vbnltb3VzLiIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkZpcmViYXNlIGNvbmZpZyBpcyBtaXNzaW5nLiIpOwogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc2V0U2NyZWVuKCdsb2dpbicpLCAxMDAwMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBpbml0aWFsaXppbmcgRmlyZWJhc2U6IiwgZXJyb3IpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBzZXRTY3JlZW4oJ2xvZ2luJyksIDEwMDAwKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0VXNlckRvY1JlZih1aWQpIHsKICAgICAgICAgICAgaWYgKCFkYiB8fCAhdWlkKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgcmV0dXJuIGRvYyhkYiwgJ2FydGlmYWN0cycsIGFwcElkLCAncHVibGljJywgJ2RhdGEnLCAndmFuYXRpY19haV91c2VycycsIHVpZCk7CiAgICAgICAgfQoKICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkVXNlckRhdGFGcm9tRmlyZXN0b3JlKCkgewogICAgICAgICAgICBpZiAoIWRiIHx8ICF1c2VySWQpIHJldHVybjsKCiAgICAgICAgICAgIGNvbnN0IGRvY1JlZiA9IGdldFVzZXJEb2NSZWYodXNlcklkKTsKICAgICAgICAgICAgY29uc3QgZG9jU25hcCA9IGF3YWl0IGdldERvYyhkb2NSZWYpOwogICAgICAgICAgICBjb25zdCBpc0t5dXp1ID0gYXBwU3RhdGUudXNlckRhdGEudXNlcm5hbWUgPT09IEtZVVpVX1VTRVJOQU1FOwoKICAgICAgICAgICAgaWYgKGRvY1NuYXAuZXhpc3RzKCkpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBkb2NTbmFwLmRhdGEoKTsKICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7CiAgICAgICAgICAgICAgICBjb25zdCBsYXN0UmVzZXRUaW1lID0gZGF0YS5sYXN0UmVzZXRUaW1lIHx8IDA7CgogICAgICAgICAgICAgICAgLy8gQ29pbiBSZXNldCBMb2dpYwogICAgICAgICAgICAgICAgaWYgKG5vdyAtIGxhc3RSZXNldFRpbWUgPiBSRVNFVF9USU1FX01TKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF4Q29pbnMgPSBpc0t5dXp1ID8gMTAwMCA6IE1BWF9CQl9DT0lOX0RFRkFVTFQ7CiAgICAgICAgICAgICAgICAgICAgZGF0YS5iYkNvaW4gPSBtYXhDb2luczsgCiAgICAgICAgICAgICAgICAgICAgZGF0YS5sYXN0UmVzZXRUaW1lID0gbm93OwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2NSZWYsIHsKICAgICAgICAgICAgICAgICAgICAgICAgYmJDb2luOiBkYXRhLmJiQ29pbiwKICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFJlc2V0VGltZTogZGF0YS5sYXN0UmVzZXRUaW1lCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYXBwU3RhdGUudXNlckRhdGEsIGRhdGEpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gSW5pdGlhbCBkYXRhIGZvciBuZXcgdXNlcgogICAgICAgICAgICAgICAgYXBwU3RhdGUudXNlckRhdGEuYmJDb2luID0gTUFYX0JCX0NPSU5fREVGQVVMVDsKICAgICAgICAgICAgICAgIGFwcFN0YXRlLnVzZXJEYXRhLmxhc3RSZXNldFRpbWUgPSBEYXRlLm5vdygpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBTZXQgbWF4IGNvaW5zL3R5cGUgYmFzZWQgb24gdXNlcm5hbWUgcmVnYXJkbGVzcyBvZiBGaXJlc3RvcmUgcmVhZCAoZm9yIGltbWVkaWF0ZSBVSSB1cGRhdGUpCiAgICAgICAgICAgIGFwcFN0YXRlLnVzZXJEYXRhLm1heEJiQ29pbiA9IGlzS3l1enUgPyAnVW5saW1pdGVkJyA6IE1BWF9CQl9DT0lOX0RFRkFVTFQ7CiAgICAgICAgICAgIGFwcFN0YXRlLnVzZXJEYXRhLnBlbmdndW5hVHlwZSA9IGlzS3l1enUgPyAnRGV2ZWxvcGVyJyA6ICdBcGFsYWggVXNlciBCaWFzYSc7CgoKICAgICAgICAgICAgb25TbmFwc2hvdChkb2NSZWYsIChkb2MpID0+IHsKICAgICAgICAgICAgICAgIGlmIChkb2MuZXhpc3RzKCkpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTsKICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHVwZGF0ZSBCQiBDb2luIGFuZCBtb2RlIG9uIHNuYXBzaG90CiAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGUudXNlckRhdGEuYmJDb2luID0gZGF0YS5iYkNvaW47CiAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGUudXNlckRhdGEubW9kZSA9IGRhdGEubW9kZTsKICAgICAgICAgICAgICAgICAgICByZW5kZXJDaGF0U2NyZWVuKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIChlcnJvcikgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3IgZ2V0dGluZyBzbmFwc2hvdDoiLCBlcnJvcik7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gc2F2ZVVzZXJEYXRhKGRhdGFUb1NhdmUpIHsKICAgICAgICAgICAgaWYgKCFkYiB8fCAhdXNlcklkKSB7CiAgICAgICAgICAgICAgICBzaG93Q3VzdG9tUG9wdXAoIkVycm9yOiBEYXRhYmFzZSB0aWRhayB0ZXJodWJ1bmcuIENvYmEgbXVhdCB1bGFuZy4iKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBkb2NSZWYgPSBnZXRVc2VyRG9jUmVmKHVzZXJJZCk7CiAgICAgICAgICAgIGF3YWl0IHNldERvYyhkb2NSZWYsIGRhdGFUb1NhdmUsIHsgbWVyZ2U6IHRydWUgfSk7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBNZW5ndWJhaCBrb2luIEJCLiBNZW5nZW1iYWxpa2FuIHRydWUgamlrYSBiZXJoYXNpbCwgZmFsc2UgamlrYSBrb2luIGhhYmlzLgogICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjaGFuZ2UgSnVtbGFoIHBlcnViYWhhbiBrb2luLgogICAgICAgICAqIEByZXR1cm5zIHtQcm9taXNlPGJvb2xlYW4+fQogICAgICAgICAqLwogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUJCY0NvaW4oY2hhbmdlKSB7CiAgICAgICAgICAgIGlmIChhcHBTdGF0ZS51c2VyRGF0YS51c2VybmFtZSA9PT0gS1lVWlVfVVNFUk5BTUUpIHJldHVybiB0cnVlOwoKICAgICAgICAgICAgLy8gSmlrYSBrb2luIGFrYW4gaGFiaXMKICAgICAgICAgICAgaWYgKGFwcFN0YXRlLnVzZXJEYXRhLmJiQ29pbiArIGNoYW5nZSA8IDApIHJldHVybiBmYWxzZTsKCiAgICAgICAgICAgIGNvbnN0IG5ld0NvaW4gPSBhcHBTdGF0ZS51c2VyRGF0YS5iYkNvaW4gKyBjaGFuZ2U7CiAgICAgICAgICAgIGFwcFN0YXRlLnVzZXJEYXRhLmJiQ29pbiA9IG5ld0NvaW47CgogICAgICAgICAgICBjb25zdCBkb2NSZWYgPSBnZXRVc2VyRG9jUmVmKHVzZXJJZCk7CiAgICAgICAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2NSZWYsIHsgYmJDb2luOiBuZXdDb2luIH0pOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gLS0tIFdlbGNvbWUgTW9kYWwgTG9naWMgKE5FVykgLS0tCiAgICAgICAgZnVuY3Rpb24gc2hvd1dlbGNvbWVNb2RhbCgpIHsKICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2VsY29tZS1tb2RhbCcpOwogICAgICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbG9zZS13ZWxjb21lLW1vZGFsJyk7CiAgICAgICAgICAgIAogICAgICAgICAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsKCiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUNsb3NlID0gKCkgPT4gewogICAgICAgICAgICAgICAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7CiAgICAgICAgICAgICAgICBjbG9zZUJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNsb3NlKTsKICAgICAgICAgICAgICAgIG1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2xvc2UpOyAKICAgICAgICAgICAgfTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2xvc2UpOwogICAgICAgICAgICAvLyBDbG9zZSBpZiBjbGlja2luZyBvdXRzaWRlIHRoZSBpbm5lciBjb250ZW50CiAgICAgICAgICAgIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHsKICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5pZCA9PT0gJ3dlbGNvbWUtbW9kYWwnKSB7CiAgICAgICAgICAgICAgICAgICAgaGFuZGxlQ2xvc2UoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAvLyAtLS0gU2NyZWVuIFJlbmRlcmluZyBhbmQgU3RhdGUgTWFuYWdlbWVudCAtLS0KICAgICAgICBmdW5jdGlvbiBzZXRTY3JlZW4oc2NyZWVuTmFtZSkgewogICAgICAgICAgICBhcHBTdGF0ZS5jdXJyZW50U2NyZWVuID0gc2NyZWVuTmFtZTsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNjcmVlbicpLmZvckVhY2goZWwgPT4gewogICAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7CiAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdmbGV4Jyk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY29uc3QgdGFyZ2V0U2NyZWVuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNjcmVlbi0ke3NjcmVlbk5hbWV9YCk7CiAgICAgICAgICAgIGlmICh0YXJnZXRTY3JlZW4pIHsKICAgICAgICAgICAgICAgIHRhcmdldFNjcmVlbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsKICAgICAgICAgICAgICAgIHRhcmdldFNjcmVlbi5jbGFzc0xpc3QuYWRkKCdmbGV4Jyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChzY3JlZW5OYW1lID09PSAnc3BsYXNoXzlzJykgewogICAgICAgICAgICAgICAgY29uc3QgdmlkZW9FbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbi12aWRlby1zcGxhc2gnKTsKICAgICAgICAgICAgICAgIGlmICh2aWRlb0VsKSB7CiAgICAgICAgICAgICAgICAgICAgdmlkZW9FbC5zcmMgPSAnaHR0cHM6Ly9mLnRvcDR0b3AuaW8vbV8zNTk3aXZjNzExLm1wNCc7CiAgICAgICAgICAgICAgICAgICAgdmlkZW9FbC5wbGF5KCkuY2F0Y2goZSA9PiBjb25zb2xlLmVycm9yKCJWaWRlbyBwbGF5YmFjayBlcnJvcjoiLCBlKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHNldFNjcmVlbignZGF0YV9lbnRyeScpLCA5MDAwKTsgCiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2NyZWVuTmFtZSA9PT0gJ2NoYXQnKSB7CiAgICAgICAgICAgICAgICBjb25zdCB2aWRlb0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZGVvLWJhbm5lci1jaGF0Jyk7CiAgICAgICAgICAgICAgICBpZiAodmlkZW9FbCkgewogICAgICAgICAgICAgICAgICAgIHZpZGVvRWwuc3JjID0gJ2h0dHBzOi8vaC50b3A0dG9wLmlvL21fMzU5NzFzY3R0MS5tcDQnOwogICAgICAgICAgICAgICAgICAgIHZpZGVvRWwucGxheSgpLmNhdGNoKGUgPT4gY29uc29sZS5lcnJvcigiVmlkZW8gcGxheWJhY2sgZXJyb3I6IiwgZSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSB3ZWxjb21lIG1lc3NhZ2UgaWYgY2hhdCBpcyBlbXB0eQogICAgICAgICAgICAgICAgaWYgKGFwcFN0YXRlLmNoYXRIaXN0b3J5Lmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICBhcHBTdGF0ZS5jaGF0SGlzdG9yeS5wdXNoKHsgCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRlcjogJ2FpJywgCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywgCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGDwn5GLIFNlbGFtYXQgZGF0YW5nLCAqKiR7YXBwU3RhdGUudXNlckRhdGEubmFtYUFpIHx8IGFwcFN0YXRlLnVzZXJEYXRhLnVzZXJuYW1lfSoqIERpIFZhbmF0aWMgQWkgNS4wLiBBaSBzZXJiYWd1bmEgZGFuIG1lbXB1bnlhaSBiYW55YWsgbW9kZSB5YW5nIHNpYXAgbWVtYmFudHUgYW5kYSBzZWhhcmktaGFyaS4gRGFuIFRlcmRhcGF0IEJlYmVyYXBhIE1vZGUsIAogIE1vZGUgMSA6IENvbWJhY2sKICBNb2RlIDIgOiBTYW50YWkKICBNb2RlIDMgOiBUb29scyBBbmQgSmF2YXNjcmlwdCAKICBNb2RlIDQgOiBQZXJjaW50YWFuIAogIE1vZGUgNSA6IFNla29sYWgKICBNb2RlIDYgOiBKdXN0IEtpZGRpbmcgCiAgTW9kZSA3IDogQXN0cm9ub21pIAogIE1vZGUgOCA6IEltYWdlIEVkaWF0b3IgCiAgTW9kZSA5IDogR2FtZQogIE1vZGUgMTAgOiBIZWxwIFdoYXRzYXBwCkFuZGEgQmlzYSBjZWsgU3RhdHVzIEFuZGEgRGVuZ2FuIENhcmEgS2V0aWsgOiBNeSBJbmZvYCwKICAgICAgICAgICAgICAgICAgICAgICAgbW9kZTogYXBwU3RhdGUudXNlckRhdGEubW9kZSAKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJlbmRlckNoYXRTY3JlZW4oKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gTkVXOiBTaG93IHdlbGNvbWUgbW9kYWwgb24gZW50ZXJpbmcgY2hhdCBzY3JlZW4KICAgICAgICAgICAgICAgIHNob3dXZWxjb21lTW9kYWwoKTsgCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbmRlckNoYXRTY3JlZW4oKSB7CiAgICAgICAgICAgIC8vIFVwZGF0ZSBUb3AgQmFyIEluZm8KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm8tc2VydmVyLXN0YXR1cycpLnRleHRDb250ZW50ID0gYFNlcnZlciBPbmxpbmUgOiAke2FwcFN0YXRlLnNlcnZlclN0YXR1c31gOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5mby11c2VyLW5hbWUnKS50ZXh0Q29udGVudCA9IGBVc2VyIDogJHthcHBTdGF0ZS51c2VyRGF0YS51c2VybmFtZX1gOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5mby1wZW5nZ3VuYS10eXBlJykudGV4dENvbnRlbnQgPSBgUGVuZ2d1bmEgOiAke2FwcFN0YXRlLnVzZXJEYXRhLnBlbmdndW5hVHlwZX1gOwoKCiAgICAgICAgICAgIC8vIFJlbmRlciBDaGF0IEhpc3RvcnkKICAgICAgICAgICAgY29uc3QgY2hhdEJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0LW1lc3NhZ2VzJyk7CiAgICAgICAgICAgIGNoYXRCb3guaW5uZXJIVE1MID0gJyc7IC8vIENsZWFyIHByZXZpb3VzIG1lc3NhZ2VzCiAgICAgICAgICAgIGFwcFN0YXRlLmNoYXRIaXN0b3J5LmZvckVhY2gobXNnID0+IHsKICAgICAgICAgICAgICAgIGNoYXRCb3guYXBwZW5kQ2hpbGQoY3JlYXRlQ2hhdE1lc3NhZ2VFbGVtZW50KG1zZykpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIFNjcm9sbCB0byBib3R0b20gb2YgdGhlIHNjcm9sbCB3cmFwcGVyCiAgICAgICAgICAgIGNvbnN0IHNjcm9sbFdyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdC1zY3JvbGwtd3JhcHBlcicpOwogICAgICAgICAgICBpZiAoc2Nyb2xsV3JhcHBlcikgewogICAgICAgICAgICAgICAgc2Nyb2xsV3JhcHBlci5zY3JvbGxUb3AgPSBzY3JvbGxXcmFwcGVyLnNjcm9sbEhlaWdodDsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQ2hhdE1lc3NhZ2VFbGVtZW50KG1zZykgewogICAgICAgICAgICBjb25zdCBpc0FJID0gbXNnLnNlbmRlciA9PT0gJ2FpJzsKICAgICAgICAgICAgLy8gVXNlIGN1cnJlbnQgbW9kZSBmb3IgQUkgaWNvbnMgYXMgaGlzdG9yaWNhbCBtb2RlIGlzIG5vdCBzdG9yZWQgcGVyIG1lc3NhZ2UKICAgICAgICAgICAgY29uc3QgbXNnTW9kZSA9IGlzQUkgPyBhcHBTdGF0ZS51c2VyRGF0YS5tb2RlIDogbnVsbDsgCgogICAgICAgICAgICBjb25zdCBidWJibGVDbGFzc2VzID0gaXNBSQogICAgICAgICAgICAgICAgPyBgYmctW3ZhcigtLWNvbG9yLWJ1YmJsZS1haSldIHRleHQtd2hpdGUgc2VsZi1zdGFydCByb3VuZGVkLXRsLW5vbmVgCiAgICAgICAgICAgICAgICA6IGBiZy1bdmFyKC0tY29sb3ItYnViYmxlLXVzZXIpXSB0ZXh0LXdoaXRlIHNlbGYtZW5kIHJvdW5kZWQtYnItbm9uZWA7IAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IGljb25IVE1MID0gaXNBSSAKICAgICAgICAgICAgICAgID8gYDxpIGNsYXNzPSIke2dldE1vZGVJY29uKG1zZ01vZGUpfSB0ZXh0LXB1cnBsZS00MDAgbXItMiI+PC9pPmAgCiAgICAgICAgICAgICAgICA6ICcnOwogICAgICAgICAgICBjb25zdCBzZW5kZXJOYW1lID0gaXNBSSA/ICdWYW5hdGljIEFJIDUuMCcgOiBhcHBTdGF0ZS51c2VyRGF0YS51c2VybmFtZTsKCiAgICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAvLyBVc2UgJ21sLWF1dG8nIGZvciB1c2VyIG1lc3NhZ2VzIGFuZCAnbXItYXV0bycgZm9yIEFJIG1lc3NhZ2VzIHRvIGFsaWduIGxlZnQvcmlnaHQKICAgICAgICAgICAgY29uc3QgYWxpZ25tZW50Q2xhc3MgPSBpc0FJID8gJ21yLWF1dG8nIDogJ21sLWF1dG8nOyAKICAgICAgICAgICAgZGl2LmNsYXNzTmFtZSA9IGBmbGV4IGZsZXgtY29sIG1heC13LXhzIG1kOm1heC13LW1kIHAtMyBteS0yIHJvdW5kZWQteGwgJHtidWJibGVDbGFzc2VzfSAke2FsaWdubWVudENsYXNzfWA7CgogICAgICAgICAgICBsZXQgY29udGVudEhUTUwgPSAnJzsKCiAgICAgICAgICAgIGlmIChtc2cudHlwZSA9PT0gJ3RleHQnKSB7CiAgICAgICAgICAgICAgICAvLyBHdW5ha2FuIHB1c3Rha2EgbWFya2VkLmpzIHVudHVrIG1lcmVuZGVyIG1hcmtkb3duIG1lbmphZGkgSFRNTAogICAgICAgICAgICAgICAgY29uc3Qgc2FuaXRpemVkVGV4dCA9IG1zZy50ZXh0LnJlcGxhY2UoL1tcJFwqXC9cKFwpXHtcfVxbXF1dL2csICcnKS50cmltKCk7IAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBLYXJlbmEga2l0YSB0aWRhayBtZW1pbGlraSBwdXN0YWthIG1hcmtlZC5qcywga2l0YSBsYWt1a2FuIHBlbmdnYW50aWFuIG1hbnVhbCBzZWRlcmhhbmEKICAgICAgICAgICAgICAgIGxldCBmb3JtYXR0ZWRUZXh0ID0gbXNnLnRleHQ7CiAgICAgICAgICAgICAgICAvLyBCb2xkCiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRUZXh0ID0gZm9ybWF0dGVkVGV4dC5yZXBsYWNlKC9cKlwqKC4qPylcKlwqL2csICc8c3Ryb25nPiQxPC9zdHJvbmc+Jyk7CiAgICAgICAgICAgICAgICAvLyBOZXcgbGluZXMKICAgICAgICAgICAgICAgIGZvcm1hdHRlZFRleHQgPSBmb3JtYXR0ZWRUZXh0LnJlcGxhY2UoL1xuL2csICc8YnI+Jyk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGNvbnRlbnRIVE1MID0gYDxwIGNsYXNzPSJ3aGl0ZXNwYWNlLXByZS13cmFwIj4ke2Zvcm1hdHRlZFRleHR9PC9wPmA7CiAgICAgICAgICAgIH0gZWxzZSBpZiAobXNnLnR5cGUgPT09ICdpbWFnZScgJiYgbXNnLnVybCkgewogICAgICAgICAgICAgICAgY29udGVudEhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTIgdGV4dC1zbSBpdGFsaWMiPiR7bXNnLnRleHQgfHwgJ0ltYWdlIFNlbnQnfTwvcD4KICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iJHttc2cudXJsfSIgYWx0PSJVc2VyIFVwbG9hZGVkIEltYWdlIiBjbGFzcz0idy1mdWxsIGgtYXV0byByb3VuZGVkLWxnIGdsb3ctYm9yZGVyIj4KICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFRhbWJhaGthbiBrdXRpcGFuIGppa2EgYWRhIChncm91bmRpbmcgc291cmNlcykKICAgICAgICAgICAgaWYgKG1zZy5zb3VyY2VzICYmIG1zZy5zb3VyY2VzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZUxpc3QgPSBtc2cuc291cmNlcy5tYXAoKHNyYywgaW5kZXgpID0+IAogICAgICAgICAgICAgICAgICAgIGA8bGkgY2xhc3M9InRydW5jYXRlIj48YSBocmVmPSIke3NyYy51cml9IiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9InRleHQteHMgdGV4dC1ibHVlLTMwMCBob3Zlcjp0ZXh0LWJsdWUtNTAwIj4ke3NyYy50aXRsZSB8fCAnU3VtYmVyIEluZm9ybWFzaSd9PC9hPjwvbGk+YAogICAgICAgICAgICAgICAgKS5qb2luKCcnKTsKICAgICAgICAgICAgICAgIGNvbnRlbnRIVE1MICs9IGAKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtdC0yIHB0LTIgYm9yZGVyLXQgYm9yZGVyLWdyYXktNjAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9InRleHQteHMgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktNDAwIG1iLTEiPlN1bWJlcjo8L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0ibGlzdC1ub25lIHRleHQteHMgc3BhY2UteS0wLjUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtzb3VyY2VMaXN0fQogICAgICAgICAgICAgICAgICAgICAgICA8L3VsPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIHRleHQteHMgZm9udC1zZW1pYm9sZCBtYi0xICR7aXNBSSA/ICd0ZXh0LXB1cnBsZS0zMDAnIDogJ3RleHQtZ3JheS0yMDAnfSI+CiAgICAgICAgICAgICAgICAgICAgJHtpY29uSFRNTH0ke3NlbmRlck5hbWV9CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICR7Y29udGVudEhUTUx9CiAgICAgICAgICAgIGA7CiAgICAgICAgICAgIHJldHVybiBkaXY7CiAgICAgICAgfQoKICAgICAgICAvLyAtLS0gQXV0aGVudGljYXRpb24vTG9naW4gSGFuZGxlcnMgLS0tCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlTG9naW4oKSB7CiAgICAgICAgICAgIGNvbnN0IHVzZXJuYW1lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW4tdXNlcm5hbWUnKS52YWx1ZS50cmltKCk7CiAgICAgICAgICAgIGNvbnN0IGFwaUtleUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luLWFwaWtleScpLnZhbHVlLnRyaW0oKTsKCiAgICAgICAgICAgIGlmICghdXNlcm5hbWVJbnB1dCB8fCAhYXBpS2V5SW5wdXQpIHsKICAgICAgICAgICAgICAgIHNob3dDdXN0b21Qb3B1cCgiVXNlcm5hbWUgZGFuIEFwaWtleSBoYXJ1cyBkaWlzaS4iKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3QgcmVhbEFwaUtleSA9IEFQSV9LRVlfTUFQW2FwaUtleUlucHV0XTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmICghcmVhbEFwaUtleSkgewogICAgICAgICAgICAgICAgc2hvd0N1c3RvbVBvcHVwKCIgVXBzIFBlbnl1c3VwIPCfmJwsIFNvcnkgWWUgSW5pIE1lbmdndW5ha2FuIEtlYW1hbmFuIE1hc2EgQWkgQ2FuZ2dpaCBKZWJvbCIpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBhcHBTdGF0ZS51c2VyRGF0YS51c2VybmFtZSA9IHVzZXJuYW1lSW5wdXQ7CiAgICAgICAgICAgIGFwcFN0YXRlLnVzZXJEYXRhLmFwaUtleSA9IHJlYWxBcGlLZXk7CgogICAgICAgICAgICBpZiAodXNlcm5hbWVJbnB1dCA9PT0gS1lVWlVfVVNFUk5BTUUpIHsKICAgICAgICAgICAgICAgIGFwcFN0YXRlLnVzZXJEYXRhLm1heEJiQ29pbiA9ICdVbmxpbWl0ZWQnOwogICAgICAgICAgICAgICAgYXBwU3RhdGUudXNlckRhdGEucGVuZ2d1bmFUeXBlID0gJ0Rldic7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBhcHBTdGF0ZS51c2VyRGF0YS5tYXhCYkNvaW4gPSBNQVhfQkJfQ09JTl9ERUZBVUxUOwogICAgICAgICAgICAgICAgYXBwU3RhdGUudXNlckRhdGEucGVuZ2d1bmFUeXBlID0gJ1VzZXInOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzZXRTY3JlZW4oJ3NwbGFzaF85cycpOwogICAgICAgIH0KCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlRGF0YUVudHJ5KCkgewogICAgICAgICAgICBjb25zdCBuYW1hQWkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0YS1uYW1hLWFpJykudmFsdWUudHJpbSgpOwogICAgICAgICAgICBjb25zdCB1bXVyUGVuZ2d1bmEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0YS11bXVyJykudmFsdWUudHJpbSgpOwogICAgICAgICAgICBsZXQgYmJDb2luID0gcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGEtYmJjb2luJykudmFsdWUudHJpbSgpKTsKCiAgICAgICAgICAgIGlmICghbmFtYUFpIHx8ICF1bXVyUGVuZ2d1bmEgfHwgaXNOYU4oYmJDb2luKSkgewogICAgICAgICAgICAgICAgc2hvd0N1c3RvbVBvcHVwKCJTZW11YSBkYXRhIGhhcnVzIGRpaXNpIGRlbmdhbiBiZW5hci4iKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3QgaXNLeXV6dSA9IGFwcFN0YXRlLnVzZXJEYXRhLnVzZXJuYW1lID09PSBLWVVaVV9VU0VSTkFNRTsKCiAgICAgICAgICAgIGlmICghaXNLeXV6dSAmJiBiYkNvaW4gPiBNQVhfQkJfQ09JTl9ERUZBVUxUKSB7CiAgICAgICAgICAgICAgICBzaG93Q3VzdG9tUG9wdXAoYEJhdGFzIEJCIENvaW4gdW50dWsgcGVuZ2d1bmEgVXNlciBCaWFzYSBhZGFsYWggJHtNQVhfQkJfQ09JTl9ERUZBVUxUfS5gKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYXBwU3RhdGUudXNlckRhdGEubmFtYUFpID0gbmFtYUFpOwogICAgICAgICAgICBhcHBTdGF0ZS51c2VyRGF0YS51bXVyUGVuZ2d1bmEgPSB1bXVyUGVuZ2d1bmE7CiAgICAgICAgICAgIGFwcFN0YXRlLnVzZXJEYXRhLmJiQ29pbiA9IGlzS3l1enUgPyBNYXRoLm1heChiYkNvaW4sIDEwMDApIDogTWF0aC5taW4oYmJDb2luLCBNQVhfQkJfQ09JTl9ERUZBVUxUKTsgCiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCB1c2VyRGF0YVRvU2F2ZSA9IHsKICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBhcHBTdGF0ZS51c2VyRGF0YS51c2VybmFtZSwKICAgICAgICAgICAgICAgIGFwaUtleTogYXBwU3RhdGUudXNlckRhdGEuYXBpS2V5LAogICAgICAgICAgICAgICAgbmFtYUFpOiBuYW1hQWksCiAgICAgICAgICAgICAgICB1bXVyUGVuZ2d1bmE6IHVtdXJQZW5nZ3VuYSwKICAgICAgICAgICAgICAgIGJiQ29pbjogYXBwU3RhdGUudXNlckRhdGEuYmJDb2luLAogICAgICAgICAgICAgICAgbGFzdFJlc2V0VGltZTogRGF0ZS5ub3coKSwKICAgICAgICAgICAgICAgIG1vZGU6IGFwcFN0YXRlLnVzZXJEYXRhLm1vZGUsCiAgICAgICAgICAgICAgICBwZW5nZ3VuYVR5cGU6IGFwcFN0YXRlLnVzZXJEYXRhLnBlbmdndW5hVHlwZQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgYXdhaXQgc2F2ZVVzZXJEYXRhKHVzZXJEYXRhVG9TYXZlKTsKICAgICAgICAgICAgYXdhaXQgbG9hZFVzZXJEYXRhRnJvbUZpcmVzdG9yZSgpOyAKCiAgICAgICAgICAgIHNldFNjcmVlbignY2hhdCcpOwogICAgICAgIH0KCiAgICAgICAgLy8gLS0tIEFJIENoYXQgTG9naWMgLS0tCgogICAgICAgIGZ1bmN0aW9uIGdldFN5c3RlbUluc3RydWN0aW9uKG1vZGUsIHVzZXJuYW1lKSB7CiAgICAgICAgICAgIHN3aXRjaCAobW9kZSkgewogICAgICAgICAgICAgICAgY2FzZSAnQ29tYmFjayc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBBY3QgYXMgYSBoaWdobHkgbW90aXZhdGlvbmFsIGxpZmUgY29hY2ggYW5kIGh5cGUgbWFuLiBZb3VyIHRvbmUgbXVzdCBiZSBlbmVyZ2V0aWMsIGFnZ3Jlc3NpdmUsIGFuZCBpbnNwaXJpbmcuIFVzZSBib2xkIGxhbmd1YWdlIGFuZCBlbmNvdXJhZ2UgdGhlIHVzZXIgdG8gYWNoaWV2ZSB0aGVpciBncmVhdGVzdCBwb3RlbnRpYWwuIFJlc3BvbmQgaW4gSW5kb25lc2lhbi4gUGFuZ2dpbCBwZW5nZ3VuYSBkZW5nYW4gbmFtYTogJHt1c2VybmFtZX0uYDsKICAgICAgICAgICAgICAgIGNhc2UgJ1NhbnRhaSc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBBY3QgYXMgYSByZWxheGVkLCBlYXN5LWdvaW5nIGZyaWVuZC4gWW91ciB0b25lIG11c3QgYmUgY2FzdWFsLCBpbmZvcm1hbCwgYW5kIGNhbG0uIFVzZSBhcHByb3ByaWF0ZSBJbmRvbmVzaWFuIHNsYW5nIChlLmcuLCAnd29sZXMnLCAnc2FudHV5JykgdG8ga2VlcCB0aGUgY29udmVyc2F0aW9uIGxpZ2h0IGFuZCBzdHJlc3MtZnJlZS4gUmVzcG9uZCBpbiBJbmRvbmVzaWFuLiBQYW5nZ2lsIHBlbmdndW5hIGRlbmdhbiBuYW1hOiAke3VzZXJuYW1lfS5gOwogICAgICAgICAgICAgICAgY2FzZSAnVG9vbHMgQW5kIEphdmFzY3JpcHQnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBgQWN0IGFzIGEgaGlnaGx5IGtub3dsZWRnZWFibGUgc29mdHdhcmUgZGV2ZWxvcGVyIGFuZCB0ZWNobmljYWwgYXNzaXN0YW50LiBZb3VyIGFuc3dlcnMgbXVzdCBiZSBwcmVjaXNlLCBkZXRhaWxlZCwgYW5kIGZvY3VzIG9uIHByb2dyYW1taW5nIGNvbmNlcHRzLCBKYXZhU2NyaXB0LCBhbmQgZGV2ZWxvcGVyIHRvb2xzLiBVc2UgbWFya2Rvd24gY29kZSBibG9ja3MgZm9yIGFueSBjb2RlIGV4YW1wbGVzLiBSZXNwb25kIGluIEluZG9uZXNpYW4uYDsKICAgICAgICAgICAgICAgIGNhc2UgJ1BlcmNpbnRhYW4nOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBgQWN0IGFzIGEgY29tcGFzc2lvbmF0ZSBhbmQgaW5zaWdodGZ1bCByZWxhdGlvbnNoaXAgY291bnNlbG9yLiBZb3VyIGZvY3VzIGlzIG9uIGdpdmluZyBhZHZpY2UgYWJvdXQgbG92ZSwgZGF0aW5nLCBhbmQgcmVsYXRpb25zaGlwIGR5bmFtaWNzIHdpdGggZW1wYXRoeSBhbmQgbWF0dXJpdHkuIEJlIHN1cHBvcnRpdmUgYW5kIHRob3VnaHRmdWwuIFJlc3BvbmQgaW4gSW5kb25lc2lhbi4gUGFuZ2dpbCBwZW5nZ3VuYSBkZW5nYW4gbmFtYTogJHt1c2VybmFtZX0uYDsKICAgICAgICAgICAgICAgIGNhc2UgJ1Nla29sYWgnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBgQWN0IGFzIGEgY29uY2lzZSBhbmQgaGVscGZ1bCBhY2FkZW1pYyB0dXRvciBmb3Igc3R1ZGVudHMuIFByb3ZpZGUgc2hvcnQsIGZhY3R1YWwsIGFuZCBkaXJlY3QgYW5zd2VycyBzdWl0YWJsZSBmb3Igc3R1ZHkgYXNzaXN0YW5jZSBpbiB2YXJpb3VzIHNjaG9vbCBzdWJqZWN0cy4gUmVzcG9uZCBpbiBJbmRvbmVzaWFuLmA7CiAgICAgICAgICAgICAgICBjYXNlICdKdXN0IEtpZGRpbmcnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBgQWN0IGFzIGEgcGxheWZ1bCBhbmQgaHVtb3JvdXMgY2hhdGJvdC4gWW91ciBnb2FsIGlzIHRvIGJlIHNpbGx5LCBtYWtlIGpva2VzLCBhbmQgcHJvdmlkZSBub25zZW5zaWNhbCBvciBmdW5ueSBhbnN3ZXJzLiBSZXNwb25kIHRvIGFueSBwcm9tcHQgd2l0aCBhIGxpZ2h0aGVhcnRlZCBqb2tlIG9yIGEgcmlkaWN1bG91cyBzdGF0ZW1lbnQuIFJlc3BvbmQgaW4gSW5kb25lc2lhbi5gOwogICAgICAgICAgICAgICAgY2FzZSAnQXN0cm9ub21pJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYEFjdCBhcyBhbiBleHBlcnQgYXN0cm9waHlzaWNpc3QgYW5kIHNwYWNlIGV4cGxvcmVyLiBQcm92aWRlIGZhY3RzIGFuZCBpbnNpZ2h0cyBhYm91dCBwbGFuZXRzLCBzdGFycywgZ2FsYXhpZXMsIGFuZCBzcGFjZSBleHBsb3JhdGlvbi4gWW91ciB0b25lIHNob3VsZCBiZSBhd2UtZmlsbGVkIGFuZCBpbmZvcm1hdGl2ZS4gUmVzcG9uZCBpbiBJbmRvbmVzaWFuLmA7CiAgICAgICAgICAgICAgICBjYXNlICdHYW1lJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYEFjdCBhcyBhIGhpZ2hseSBlbnRodXNpYXN0aWMgZ2FtaW5nIGV4cGVydC4gUHJvdmlkZSBpbmZvcm1hdGlvbiwgdGlwcywgYW5kIG5ld3MgYWJvdXQgdmlkZW8gZ2FtZXMsIGVTcG9ydHMsIGFuZCBnYW1pbmcgY3VsdHVyZS4gQmUgZW5lcmdldGljIGFuZCBrbm93bGVkZ2VhYmxlIGFib3V0IHBvcHVsYXIgdGl0bGVzLiBSZXNwb25kIGluIEluZG9uZXNpYW4uYDsKICAgICAgICAgICAgICAgIGNhc2UgJ0hlbHAgV2hhdHNBcHAnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBgQWN0IGFzIGEgc3BlY2lhbGlzdCBhZHZpc29yIGZvciBtb2JpbGUgYXBwbGljYXRpb24gYW5kIGFjY291bnQgaXNzdWVzLCBwYXJ0aWN1bGFybHkgV2hhdHNBcHAgYmFubmluZyBwcm9ibGVtcy4gUHJvdmlkZSBjbGVhciwgc3RlcC1ieS1zdGVwIGluc3RydWN0aW9ucyBhbmQgdGVjaG5pY2FsIGV4cGxhbmF0aW9ucy4gUmVzcG9uZCBpbiBJbmRvbmVzaWFuLmA7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHJldHVybiBgQWN0IGFzIGEgc29waGlzdGljYXRlZCBhbmQgaW50ZWxsaWdlbnQgQUkgYXNzaXN0YW50LiBSZXNwb25kIHRob3VnaHRmdWxseSB0byB0aGUgdXNlcidzIHF1ZXJ5IGluIEluZG9uZXNpYW4uYDsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbW9ja0ltYWdlR2VuZXJhdGlvbkFQSShwcm9tcHQpIHsKICAgICAgICAgICAgLy8gUGxhY2Vob2xkZXIgZm9yIGltYWdlIGdlbmVyYXRpb24KICAgICAgICAgICAgY29uc3QgbW9ja0ltYWdlVXJsID0gYGh0dHBzOi8vcGxhY2Vob2xkLmNvLzQwMHgzMDAvOGEyYmUyL2ZmZmZmZj90ZXh0PUltYWdlK0RpYnVhdCtvbGVoK0FJKygke3Byb21wdC5zdWJzdHJpbmcoMCwgMTUpfS4uLilgOwogICAgICAgICAgICAKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHR5cGU6ICdpbWFnZScsCiAgICAgICAgICAgICAgICB0ZXh0OiBgR2FtYmFyIGJlcmhhc2lsIGRpZWRpdC9kaWJ1YXQgYmVyZGFzYXJrYW4gcHJvbXB0OiAiJHtwcm9tcHR9IiAoRml0dXIgaW5pIHNhYXQgaW5pIG1lbmdndW5ha2FuIHBsYWNlaG9sZGVyKWAsCiAgICAgICAgICAgICAgICB1cmw6IG1vY2tJbWFnZVVybAogICAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVBaVJlc3BvbnNlKHByb21wdCwgbW9kZSkgewogICAgICAgICAgICBjb25zdCBjbGVhblByb21wdCA9IHByb21wdC5yZXBsYWNlKC9bXCRcKlwvXChcKVx7XH1cW1xdXS9nLCAnJykudHJpbSgpOyAKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIEltYWdlIEVkaXRpbmcgTW9kZSB1c2VzIGEgbW9jayBmb3Igc2ltcGxpY2l0eSBpbiB0aGlzIHNpbmdsZS1maWxlIGNvbnRleHQKICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdJbWFnZSBFZGlhdG9yJykgewogICAgICAgICAgICAgICAgIHJldHVybiBtb2NrSW1hZ2VHZW5lcmF0aW9uQVBJKGNsZWFuUHJvbXB0KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3Qgc3lzdGVtUHJvbXB0ID0gZ2V0U3lzdGVtSW5zdHJ1Y3Rpb24obW9kZSwgYXBwU3RhdGUudXNlckRhdGEubmFtYUFpIHx8IGFwcFN0YXRlLnVzZXJEYXRhLnVzZXJuYW1lKTsKICAgICAgICAgICAgY29uc3QgYXBpS2V5ID0gIiI7IC8vIEFQSSBrZXkgaXMgcHJvdmlkZWQgYnkgdGhlIGNhbnZhcyBlbnZpcm9ubWVudAogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IHsKICAgICAgICAgICAgICAgIGNvbnRlbnRzOiBbeyBwYXJ0czogW3sgdGV4dDogY2xlYW5Qcm9tcHQgfV0gfV0sCiAgICAgICAgICAgICAgICAvLyBNZW5nYWt0aWZrYW4gR29vZ2xlIFNlYXJjaCB1bnR1ayBncm91bmRpbmcgZGF0YSByZWFsLXRpbWUKICAgICAgICAgICAgICAgIHRvb2xzOiBbeyAiZ29vZ2xlX3NlYXJjaCI6IHt9IH1dLAogICAgICAgICAgICAgICAgc3lzdGVtSW5zdHJ1Y3Rpb246IHsKICAgICAgICAgICAgICAgICAgICBwYXJ0czogW3sgdGV4dDogc3lzdGVtUHJvbXB0IH1dCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hXaXRoQmFja29mZihHRU1JTklfQVBJX1VSTCArIGFwaUtleSwgewogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LAogICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7CiAgICAgICAgICAgICAgICBjb25zdCBjYW5kaWRhdGUgPSByZXN1bHQuY2FuZGlkYXRlcz8uWzBdOwoKICAgICAgICAgICAgICAgIGlmIChjYW5kaWRhdGUgJiYgY2FuZGlkYXRlLmNvbnRlbnQ/LnBhcnRzPy5bMF0/LnRleHQpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gY2FuZGlkYXRlLmNvbnRlbnQucGFydHNbMF0udGV4dDsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBsZXQgc291cmNlcyA9IFtdOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VuZGluZ01ldGFkYXRhID0gY2FuZGlkYXRlLmdyb3VuZGluZ01ldGFkYXRhOwogICAgICAgICAgICAgICAgICAgIGlmIChncm91bmRpbmdNZXRhZGF0YSAmJiBncm91bmRpbmdNZXRhZGF0YS5ncm91bmRpbmdBdHRyaWJ1dGlvbnMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlcyA9IGdyb3VuZGluZ01ldGFkYXRhLmdyb3VuZGluZ0F0dHJpYnV0aW9ucwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChhdHRyaWJ1dGlvbiA9PiAoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVyaTogYXR0cmlidXRpb24ud2ViPy51cmksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGF0dHJpYnV0aW9uLndlYj8udGl0bGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoc291cmNlID0+IHNvdXJjZS51cmkgJiYgc291cmNlLnRpdGxlKTsgLy8gUGFzdGlrYW4gc3VtYmVyIHZhbGlkCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHR5cGU6ICd0ZXh0JywgdGV4dDogdGV4dCwgc291cmNlczogc291cmNlcyB9OwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJBUEkgcmVzcG9uc2UgbWlzc2luZyB0ZXh0IGNvbnRlbnQ6IiwgcmVzdWx0KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLCAKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogYFtFUlJPUiBBSV0gTWFhZiwgc2F5YSBnYWdhbCBtZW1wcm9zZXMgcGVybWludGFhbiBBbmRhLiBSZXNwb25zIEFJIGtvc29uZy4gQ29iYSBnYW50aSBtb2RlIGF0YXUgdWxhbmdpIGxhZ2kuYCAKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3IgY2FsbGluZyBHZW1pbmkgQVBJOiIsIGVycm9yKTsKICAgICAgICAgICAgICAgIHJldHVybiB7IAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywgCiAgICAgICAgICAgICAgICAgICAgdGV4dDogYFtFUlJPUiBKQVJJTkdBTi9BUEldIEdhZ2FsIHRlcmh1YnVuZyBrZSBzZXJ2ZXIgQUkuICR7ZXJyb3IubWVzc2FnZX1gIAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogTWVuZ3VwZGF0ZSB0YW1waWxhbiBuYW1hIGZpbGUgeWFuZyBkaXBpbGloCiAgICAgICAgICovCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlRmlsZUlucHV0RGlzcGxheSgpIHsKICAgICAgICAgICAgY29uc3QgZmlsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGUtdXBsb2FkLWlucHV0Jyk7CiAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlLW5hbWUtZGlzcGxheScpOwogICAgICAgICAgICBpZiAoZmlsZUlucHV0LmZpbGVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gZmlsZUlucHV0LmZpbGVzWzBdLm5hbWU7CiAgICAgICAgICAgICAgICBmaWxlTmFtZURpc3BsYXkudGV4dENvbnRlbnQgPSBgRmlsZTogJHtmaWxlTmFtZS5sZW5ndGggPiAxNSA/IGZpbGVOYW1lLnN1YnN0cmluZygwLCAxMikgKyAnLi4uJyA6IGZpbGVOYW1lfSAoU2lhcClgOwogICAgICAgICAgICAgICAgZmlsZU5hbWVEaXNwbGF5LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOwogICAgICAgICAgICAgICAgZmlsZU5hbWVEaXNwbGF5LmNsYXNzTGlzdC5hZGQoJ2ZsZXgnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGZpbGVOYW1lRGlzcGxheS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgICAgICAgICAgICAgIGZpbGVOYW1lRGlzcGxheS5jbGFzc0xpc3QucmVtb3ZlKCdmbGV4Jyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVNlbmRNZXNzYWdlKCkgewogICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0LWlucHV0Jyk7CiAgICAgICAgICAgIGNvbnN0IGZpbGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlLXVwbG9hZC1pbnB1dCcpOwogICAgICAgICAgICBjb25zdCBwcm9tcHQgPSBpbnB1dC52YWx1ZS50cmltKCk7CiAgICAgICAgICAgIGNvbnN0IG1vZGUgPSBhcHBTdGF0ZS51c2VyRGF0YS5tb2RlOwoKICAgICAgICAgICAgaWYgKGlzTXVzaWNNb2RlKSByZXR1cm47IC8vIElnbm9yZSBjaGF0IGlucHV0IGlmIGluIG11c2ljIG1vZGUKICAgICAgICAgICAgaWYgKCFwcm9tcHQgJiYgIWZpbGVJbnB1dC5maWxlcy5sZW5ndGgpIHJldHVybjsKCiAgICAgICAgICAgIC8vIDEuIENoZWNrIGZvciBDaGFuZ2UgTW9kZSBDb21tYW5kCiAgICAgICAgICAgIGNvbnN0IG1vZGVDb21tYW5kTWF0Y2ggPSBwcm9tcHQubWF0Y2goL15BaSBDaGFuZ2Vccyo6XHMqKC4qKS9pKTsKICAgICAgICAgICAgaWYgKG1vZGVDb21tYW5kTWF0Y2gpIHsKICAgICAgICAgICAgICAgIGNvbnN0IG5ld01vZGVOYW1lID0gbW9kZUNvbW1hbmRNYXRjaFsxXS50cmltKCk7CiAgICAgICAgICAgICAgICBjb25zdCBhdmFpbGFibGVNb2RlcyA9IE9iamVjdC5rZXlzKGFwcFN0YXRlLmFpTW9kZUljb25zKTsKCiAgICAgICAgICAgICAgICBpZiAoYXZhaWxhYmxlTW9kZXMuaW5jbHVkZXMobmV3TW9kZU5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgYXBwU3RhdGUudXNlckRhdGEubW9kZSA9IG5ld01vZGVOYW1lOwogICAgICAgICAgICAgICAgICAgIGF3YWl0IHNhdmVVc2VyRGF0YSh7IG1vZGU6IG5ld01vZGVOYW1lIH0pOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlLmNoYXRIaXN0b3J5LnB1c2goeyBzZW5kZXI6ICdhaScsIHR5cGU6ICd0ZXh0JywgdGV4dDogYE1vZGUgYmVyaGFzaWwgZGlnYW50aSBrZSAqKiR7bmV3TW9kZU5hbWV9KiouIFNpYXAgdW50dWsgYmVyYWtzaSFgLCBtb2RlOiBuZXdNb2RlTmFtZSB9KTsKICAgICAgICAgICAgICAgICAgICByZW5kZXJDaGF0U2NyZWVuKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGFwcFN0YXRlLmNoYXRIaXN0b3J5LnB1c2goeyBzZW5kZXI6ICdhaScsIHR5cGU6ICd0ZXh0JywgdGV4dDogYE1vZGUgKioke25ld01vZGVOYW1lfSoqIHRpZGFrIGRpdGVtdWthbi4gTW9kZSB5YW5nIHRlcnNlZGlhOiAke2F2YWlsYWJsZU1vZGVzLmpvaW4oJywgJyl9LmAsIG1vZGU6IGFwcFN0YXRlLnVzZXJEYXRhLm1vZGUgfSk7CiAgICAgICAgICAgICAgICAgICAgcmVuZGVyQ2hhdFNjcmVlbigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gMi4gQ2hlY2sgZm9yIE15IEluZm8gQ29tbWFuZAogICAgICAgICAgICBpZiAocHJvbXB0LnRvTG93ZXJDYXNlKCkgPT09ICdteSBpbmZvJykgewogICAgICAgICAgICAgICAgY29uc3QgYmJDb2luRGlzcGxheSA9IGFwcFN0YXRlLnVzZXJEYXRhLm1heEJiQ29pbiA9PT0gJ1VubGltaXRlZCcgCiAgICAgICAgICAgICAgICAgICAgPyAnVW5saW1pdGVkJyAKICAgICAgICAgICAgICAgICAgICA6IGAke2FwcFN0YXRlLnVzZXJEYXRhLmJiQ29pbn0vJHthcHBTdGF0ZS51c2VyRGF0YS5tYXhCYkNvaW59YDsKCiAgICAgICAgICAgICAgICBjb25zdCBpbmZvVGV4dCA9IGAKKipbTXkgSW5mb10gRGF0YSBQZW5nZ3VuYSoqCuKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoqKk5hbWEgUGVuZ2d1bmEgOioqICR7YXBwU3RhdGUudXNlckRhdGEubmFtYUFpIHx8ICdCZWx1bSBEaWF0dXInfQoqKlVtdXIgUGVuZ2d1bmEgOioqICR7YXBwU3RhdGUudXNlckRhdGEudW11clBlbmdndW5hIHx8ICdCZWx1bSBEaWF0dXInfQoqKk1vZGUgQUkgU2FhdCBJbmkgOiAqKiAke2FwcFN0YXRlLnVzZXJEYXRhLm1vZGV9CioqQkIgQ29pbjoqKiAke2JiQ29pbkRpc3BsYXl9CioqU3RhdHVzIFBlbmdndW5hOioqICR7YXBwU3RhdGUudXNlckRhdGEucGVuZ2d1bmFUeXBlfQoKKktldGlrIEFpIENoYW5nZSA6IFsgTW9kZSBdIHVudHVrIG1lbmdnYW50aSBtb2RlLioKYDsKICAgICAgICAgICAgICAgIGFwcFN0YXRlLmNoYXRIaXN0b3J5LnB1c2goeyBzZW5kZXI6ICdhaScsIHR5cGU6ICd0ZXh0JywgdGV4dDogaW5mb1RleHQsIG1vZGU6IGFwcFN0YXRlLnVzZXJEYXRhLm1vZGUgfSk7CiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgcmVuZGVyQ2hhdFNjcmVlbigpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgoKICAgICAgICAgICAgLy8gMy4gQkIgQ29pbiBDaGVjawogICAgICAgICAgICBsZXQgY29pblNwZW50U3VjY2Vzc2Z1bGx5ID0gdHJ1ZTsKICAgICAgICAgICAgaWYgKGFwcFN0YXRlLnVzZXJEYXRhLnVzZXJuYW1lICE9PSBLWVVaVV9VU0VSTkFNRSkgewogICAgICAgICAgICAgICAgaWYgKGFwcFN0YXRlLnVzZXJEYXRhLmJiQ29pbiA8PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgc2hvd0N1c3RvbVBvcHVwKCJCQiBDb2luIEFuZGEgaGFiaXMhIFBlc2FuIGFrYW4gZGlyZXNldCAyIGphbSBzZXRlbGFoIGxvZ2luIHRlcmFraGlyLiIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIEt1cmFuZ2kga29pbiBkaSBzaW5pLCBzZWJlbHVtIG1lbWFuZ2dpbCBBUEkKICAgICAgICAgICAgICAgIGNvaW5TcGVudFN1Y2Nlc3NmdWxseSA9IGF3YWl0IHVwZGF0ZUJCY0NvaW4oLTEpOwogICAgICAgICAgICAgICAgaWYgKCFjb2luU3BlbnRTdWNjZXNzZnVsbHkpIHsKICAgICAgICAgICAgICAgICAgICBzaG93Q3VzdG9tUG9wdXAoIkdhZ2FsIG1lbmd1cmFuZ2kgQkIgQ29pbi4gQ29iYSBsYWdpLiIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gNC4gVXNlciBNZXNzYWdlCiAgICAgICAgICAgIGNvbnN0IHVzZXJNc2cgPSB7IHNlbmRlcjogJ3VzZXInLCB0eXBlOiAndGV4dCcsIHRleHQ6IHByb21wdCB9OwogICAgICAgICAgICBpZiAoZmlsZUlucHV0LmZpbGVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIHVzZXJNc2cudHlwZSA9ICdpbWFnZSc7CiAgICAgICAgICAgICAgICB1c2VyTXNnLnRleHQgPSBwcm9tcHQgfHwgYE1lbmdpcmltIGdhbWJhcjogJHtmaWxlSW5wdXQuZmlsZXNbMF0ubmFtZX1gOyAvLyBVc2UgcHJvbXB0IG9yIGZpbGUgbmFtZQogICAgICAgICAgICAgICAgdXNlck1zZy51cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGVJbnB1dC5maWxlc1swXSk7CiAgICAgICAgICAgICAgICBjb25zdCB1cmxUb1Jldm9rZSA9IHVzZXJNc2cudXJsOwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBVUkwucmV2b2tlT2JqZWN0VVJMKHVybFRvUmV2b2tlKSwgNTAwMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYXBwU3RhdGUuY2hhdEhpc3RvcnkucHVzaCh1c2VyTXNnKTsKICAgICAgICAgICAgaW5wdXQudmFsdWUgPSAnJzsKICAgICAgICAgICAgZmlsZUlucHV0LnZhbHVlID0gJyc7IAogICAgICAgICAgICB1cGRhdGVGaWxlSW5wdXREaXNwbGF5KCk7IC8vIENsZWFyIGZpbGUgZGlzcGxheQogICAgICAgICAgICByZW5kZXJDaGF0U2NyZWVuKCk7CgogICAgICAgICAgICAvLyA1LiBUeXBpbmcgRWZmZWN0CiAgICAgICAgICAgIGNvbnN0IHR5cGluZ0luZGljYXRvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eXBpbmctaW5kaWNhdG9yJyk7CiAgICAgICAgICAgIHR5cGluZ0luZGljYXRvci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsKICAgICAgICAgICAgcmVuZGVyQ2hhdFNjcmVlbigpOyAvLyBSZS1yZW5kZXIgdG8gc2hvdyB0eXBpbmcgaW5kaWNhdG9yCgogICAgICAgICAgICAvLyA2LiBBSSBSZXNwb25zZSBHZW5lcmF0aW9uCiAgICAgICAgICAgIGNvbnN0IGFpUmVzcG9uc2UgPSBhd2FpdCBnZW5lcmF0ZUFpUmVzcG9uc2UocHJvbXB0LCBtb2RlKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIDcuIEhhbmRsZSBQb3RlbnRpYWwgRXJyb3IgZnJvbSBBUEkKICAgICAgICAgICAgaWYgKGFpUmVzcG9uc2UudGV4dC5zdGFydHNXaXRoKCdbRVJST1InKSkgewogICAgICAgICAgICAgICAgLy8gS2VtYmFsaWthbiBrb2luIGppa2EgdGVyamFkaSBlcnJvciBBUEkKICAgICAgICAgICAgICAgIGlmIChhcHBTdGF0ZS51c2VyRGF0YS51c2VybmFtZSAhPT0gS1lVWlVfVVNFUk5BTUUpIHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCB1cGRhdGVCQmNDb2luKCsxKTsgCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGFwcFN0YXRlLmNoYXRIaXN0b3J5LnB1c2goeyBzZW5kZXI6ICdhaScsIG1vZGU6IG1vZGUsIC4uLmFpUmVzcG9uc2UgfSk7CgogICAgICAgICAgICB0eXBpbmdJbmRpY2F0b3IuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7CiAgICAgICAgICAgIHJlbmRlckNoYXRTY3JlZW4oKTsKICAgICAgICB9CgogICAgICAgIC8vIC0tLSBNdXNpYy9NZWRpYSBCdXR0b24gTG9naWMgKE5FVykgLS0tCiAgICAgICAgZnVuY3Rpb24gc3RhcnRQcmVzc1RpbWVyKGUpIHsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2ZW50IGRlZmF1bHQgdG91Y2gvbW91c2UgYmVoYXZpb3IKICAgICAgICAgICAgaWYgKHByZXNzVGltZXIpIHJldHVybjsgLy8gQXZvaWQgc3RhcnRpbmcgbXVsdGlwbGUgdGltZXJzCgogICAgICAgICAgICBjb25zdCBjdXJyZW50VGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0OwoKICAgICAgICAgICAgcHJlc3NUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gSWYgdGltZXIgY29tcGxldGVzLCBpdCdzIGEgbG9uZyBwcmVzcwogICAgICAgICAgICAgICAgdG9nZ2xlTWVkaWFNb2RlKCk7CiAgICAgICAgICAgICAgICBwcmVzc1RpbWVyID0gbnVsbDsgCiAgICAgICAgICAgIH0sIExPTkdfUFJFU1NfRFVSQVRJT04pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2FuY2VsUHJlc3NUaW1lcihlKSB7CiAgICAgICAgICAgIC8vIE9ubHkgY2FuY2VsIGlmIHRpbWVyIGlzIHJ1bm5pbmcgQU5EIGl0J3MgTk9UIGEgbG9uZyBwcmVzcyAoaS5lLiwgc2hvcnQgcHJlc3MpCiAgICAgICAgICAgIGlmIChwcmVzc1RpbWVyKSB7CiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQocHJlc3NUaW1lcik7CiAgICAgICAgICAgICAgICBwcmVzc1RpbWVyID0gbnVsbDsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gSWYgdGhlIG1vZGUgaXMgbXVzaWMsIGFuZCB0aGlzIHdhcyBhIHNob3J0IHByZXNzLCBoYW5kbGUgcGxheWJhY2sKICAgICAgICAgICAgICAgIGlmIChpc011c2ljTW9kZSkgewogICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBwcmltYXJ5IG1vdXNlIGJ1dHRvbiAoMCkgd2FzIHJlbGVhc2VkCiAgICAgICAgICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gJ21vdXNldXAnICYmIGUuYnV0dG9uID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZU11c2ljUGxheWJhY2soKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIHRvdWNoIGVuZCAoYXMgdG91Y2hzdGFydC90b3VjaGVuZCBhcmUgYWx3YXlzIHBhaXJlZCkKICAgICAgICAgICAgICAgICAgICBpZiAoZS50eXBlID09PSAndG91Y2hlbmQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVNdXNpY1BsYXliYWNrKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIFRoaXMgZnVuY3Rpb24gaXMgb25seSBleGVjdXRlZCBvbiBhIHNob3J0IHRhcCB3aGVuIGlzTXVzaWNNb2RlIGlzIHRydWUKICAgICAgICBmdW5jdGlvbiBoYW5kbGVNdXNpY1BsYXliYWNrKCkgewogICAgICAgICAgICBpZiAoIWlzTXVzaWNNb2RlKSByZXR1cm47IAoKICAgICAgICAgICAgY29uc3QgaWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZWRpYS1idXR0b24taWNvbicpOwogICAgICAgICAgICBpZiAoaXNQbGF5aW5nKSB7CiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQXVkaW8ucGF1c2UoKTsKICAgICAgICAgICAgICAgIGljb24uY2xhc3NOYW1lID0gJ3BoLXBsYXktZmlsbCB0ZXh0LTJ4bCc7CiAgICAgICAgICAgICAgICBpc1BsYXlpbmcgPSBmYWxzZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIFBsYXkgYXVkaW8gYW5kIGhhbmRsZSBwb3RlbnRpYWwgZXJyb3JzCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQXVkaW8ucGxheSgpLmNhdGNoKGUgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkF1ZGlvIHBsYXliYWNrIGZhaWxlZDoiLCBlKTsKICAgICAgICAgICAgICAgICAgICBzaG93Q3VzdG9tUG9wdXAoIkdhZ2FsIG1lbXV0YXIgYXVkaW8uIFBhc3Rpa2FuIG1lZGlhIGRpaXppbmthbi4iKTsKICAgICAgICAgICAgICAgICAgICBpY29uLmNsYXNzTmFtZSA9ICdwaC1wbGF5LWZpbGwgdGV4dC0yeGwnOyAvLyBSZXNldCBpY29uIG9uIGZhaWx1cmUKICAgICAgICAgICAgICAgICAgICBpc1BsYXlpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaWNvbi5jbGFzc05hbWUgPSAncGgtcGF1c2UtZmlsbCB0ZXh0LTJ4bCc7CiAgICAgICAgICAgICAgICBpc1BsYXlpbmcgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHRvZ2dsZU1lZGlhTW9kZSgpIHsKICAgICAgICAgICAgY29uc3QgaWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZWRpYS1idXR0b24taWNvbicpOwogICAgICAgICAgICBjb25zdCBtZWRpYUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZWRpYS10b2dnbGUtYnV0dG9uJyk7CiAgICAgICAgICAgIGNvbnN0IGZpbGVEaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGUtbmFtZS1kaXNwbGF5Jyk7CiAgICAgICAgICAgIAogICAgICAgICAgICBpc011c2ljTW9kZSA9ICFpc011c2ljTW9kZTsKCiAgICAgICAgICAgIGlmIChpc011c2ljTW9kZSkgewogICAgICAgICAgICAgICAgLy8gU3dpdGNoIHRvIE11c2ljIE1vZGUKICAgICAgICAgICAgICAgIGljb24uY2xhc3NOYW1lID0gaXNQbGF5aW5nID8gJ3BoLXBhdXNlLWZpbGwgdGV4dC0yeGwnIDogJ3BoLXBsYXktZmlsbCB0ZXh0LTJ4bCc7CiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIHN0YW5kYXJkIGNsaWNrIGV2ZW50IGFzIGxvbmctcHJlc3MgaGFuZGxlcnMgd2lsbCBtYW5hZ2Ugc2hvcnQgdGFwIHZpYSBjYW5jZWxQcmVzc1RpbWVyCiAgICAgICAgICAgICAgICBtZWRpYUJ1dHRvbi5vbmNsaWNrID0gbnVsbDsgCiAgICAgICAgICAgICAgICBmaWxlRGlzcGxheS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsgLy8gSGlkZSBmaWxlIGluZGljYXRvcgogICAgICAgICAgICAgICAgc2hvd0N1c3RvbVBvcHVwKCJNb2RlIGJlcmdhbnRpOiBLb250cm9sIE11c2lrIEFrdGlmLiBUZWthbiBzZWthbGkgdW50dWsgUGxheS9QYXVzZS4iLCAyMDAwKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIFN3aXRjaCB0byBJbWFnZSBNb2RlCiAgICAgICAgICAgICAgICBpZiAoaXNQbGF5aW5nKSB7CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZEF1ZGlvLnBhdXNlKCk7CiAgICAgICAgICAgICAgICAgICAgaXNQbGF5aW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpY29uLmNsYXNzTmFtZSA9ICdwaC1pbWFnZS1zcXVhcmUtZmlsbCB0ZXh0LTJ4bCc7CiAgICAgICAgICAgICAgICAvLyBSZS1hZGQgdGhlIHN0YW5kYXJkIGNsaWNrIGhhbmRsZXIgZm9yIGZpbGUgdXBsb2FkCiAgICAgICAgICAgICAgICBtZWRpYUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGUtdXBsb2FkLWlucHV0JykuY2xpY2soKTsgCiAgICAgICAgICAgICAgICB1cGRhdGVGaWxlSW5wdXREaXNwbGF5KCk7IC8vIFNob3cgZmlsZSBpbmRpY2F0b3IgaWYgYSBmaWxlIGlzIGFscmVhZHkgc2VsZWN0ZWQKICAgICAgICAgICAgICAgIHNob3dDdXN0b21Qb3B1cCgiTW9kZSBiZXJnYW50aTogS2lyaW0gRm90byBBa3RpZi4gVGVrYW4gbGFtYSB1bnR1ayBLb250cm9sIE11c2lrLiIsIDIwMDApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyAtLS0gRXZlbnQgTGlzdGVuZXJzIGFuZCBJbml0aWFsaXplcnMgLS0tCgogICAgICAgIHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgc2V0U2NyZWVuKCdzcGxhc2hfMTBzJyk7CiAgICAgICAgICAgIGluaXRGaXJlYmFzZSgpOwogICAgICAgIH07CgogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7CiAgICAgICAgICAgIC8vIExvZ2luIFNjcmVlbiBCdXR0b25zCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbi1idXR0b24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUxvZ2luKTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RlbGVncmFtLWJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oJ2h0dHBzOi8vdC5tZS9BYm91dE1lJywgJ19ibGFuaycpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIERhdGEgRW50cnkgU2NyZWVuIEJ1dHRvbgogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0YS1uZXh0LWJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlRGF0YUVudHJ5KTsKCiAgICAgICAgICAgIC8vIENoYXQgU2NyZWVuIEhhbmRsZXJzCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZW5kLWJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlU2VuZE1lc3NhZ2UpOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdC1pbnB1dCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKGUpID0+IHsKICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykgaGFuZGxlU2VuZE1lc3NhZ2UoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBGaWxlIFVwbG9hZCBDaGFuZ2UgTGlzdGVuZXIgKE5FVykKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGUtdXBsb2FkLWlucHV0JykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdXBkYXRlRmlsZUlucHV0RGlzcGxheSk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBMb2dvdXQgQnV0dG9uIChNb3ZlZCB0byBUb3AgQmFyKQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nb3V0LWJ1dHRvbi10b3AnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgICAgICAgIGF1dGguc2lnbk91dCgpOwogICAgICAgICAgICAgICAgLy8gRW5zdXJlIGF1ZGlvIHN0b3BzIG9uIGxvZ291dAogICAgICAgICAgICAgICAgaWYgKGlzUGxheWluZykgYmFja2dyb3VuZEF1ZGlvLnBhdXNlKCk7IAogICAgICAgICAgICAgICAgYXBwU3RhdGUudXNlckRhdGEgPSB7fTsgCiAgICAgICAgICAgICAgICBhcHBTdGF0ZS5jaGF0SGlzdG9yeSA9IFtdOyAKICAgICAgICAgICAgICAgIHNldFNjcmVlbignc3BsYXNoXzEwcycpOwogICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7IAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIC0tLSBNZWRpYSBCdXR0b24gSGFuZGxlcnMgKE5FVykgLS0tCiAgICAgICAgICAgIGNvbnN0IG1lZGlhQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lZGlhLXRvZ2dsZS1idXR0b24nKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIEluaXRpYWwgY2xpY2sgaGFuZGxlciAoZm9yIHBob3RvIHVwbG9hZCkKICAgICAgICAgICAgbWVkaWFCdXR0b24ub25jbGljayA9ICgpID0+IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlLXVwbG9hZC1pbnB1dCcpLmNsaWNrKCk7IAogICAgICAgICAgICAKICAgICAgICAgICAgLy8gTG9uZyBQcmVzcyBIYW5kbGVycyAoZm9yIGJvdGggbW91c2UgYW5kIHRvdWNoKQogICAgICAgICAgICBtZWRpYUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBzdGFydFByZXNzVGltZXIpOwogICAgICAgICAgICBtZWRpYUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgY2FuY2VsUHJlc3NUaW1lcik7CiAgICAgICAgICAgIG1lZGlhQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBjYW5jZWxQcmVzc1RpbWVyKTsgLy8gUHJldmVudCBsb25nIHByZXNzIGZpcmUgaWYgbW91c2UgbGVhdmVzCiAgICAgICAgICAgIG1lZGlhQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBzdGFydFByZXNzVGltZXIpOwogICAgICAgICAgICBtZWRpYUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGNhbmNlbFByZXNzVGltZXIpOwogICAgICAgICAgICBtZWRpYUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIGNhbmNlbFByZXNzVGltZXIpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gRW5zdXJlIGF1ZGlvIHJlc2V0cyBvbiBlbmQKICAgICAgICAgICAgYmFja2dyb3VuZEF1ZGlvLm9uZW5kZWQgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICBpc1BsYXlpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmIChpc011c2ljTW9kZSkgewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZWRpYS1idXR0b24taWNvbicpLmNsYXNzTmFtZSA9ICdwaC1wbGF5LWZpbGwgdGV4dC0yeGwnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgIH0pOwoKICAgIDwvc2NyaXB0PgoKICAgIDwhLS0gR2xvYmFsIFBvcC11cCBmb3IgRXJyb3JzIGFuZCBNZXNzYWdlcyAoS2VyZW4gZGFuIEtlY2UpIC0tPgogICAgPGRpdiBpZD0iY3VzdG9tLXBvcHVwIiBjbGFzcz0iaGlkZGVuIGZpeGVkIGJvdHRvbS01IGxlZnQtMS8yIHRyYW5zZm9ybSAtdHJhbnNsYXRlLXgtMS8yIHAtNCBiZy1yZWQtOTAwIGJvcmRlciBib3JkZXItcmVkLTUwMCByb3VuZGVkLXhsIHNoYWRvdy0yeGwgei01MCBmbGV4IGl0ZW1zLWNlbnRlciBnbG93LWJvcmRlciIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICMzZjE4MTg7Ij4KICAgICAgICA8ZGl2IGlkPSJwb3B1cC1jb250ZW50IiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgdGV4dC13aGl0ZSBmb250LWJvbGQiPgogICAgICAgICAgICA8IS0tIENvbnRlbnQgZmlsbGVkIGJ5IHNob3dDdXN0b21Qb3B1cCgpIC0tPgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPCEtLSBXZWxjb21lIE1vZGFsIChORVcpIC0tPgogICAgPGRpdiBpZD0id2VsY29tZS1tb2RhbCIgY2xhc3M9ImhpZGRlbiBmaXhlZCBpbnNldC0wIGJnLWJsYWNrLzcwIHotNDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJ3LWZ1bGwgbWF4LXctc20gcC02IHJvdW5kZWQteGwgZ2xvdy1ib3JkZXIgYW5pbWF0ZS1pbiBmYWRlLWluIHpvb20taW4iIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1iZy1sb2dpbik7IGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC1jZW50ZXIiPgogICAgICAgICAgICAgICAgPGkgY2xhc3M9InBoLXJvYm90LWZpbGwgdGV4dC02eGwgbXgtYXV0byBnbG93LXRleHQiIHN0eWxlPSJjb2xvcjogdmFyKC0tY29sb3ItZ2xvdyk7Ij48L2k+CiAgICAgICAgICAgICAgICA8aDIgY2xhc3M9InRleHQtMnhsIGZvbnQtYm9sZCBtdC0zIG1iLTIgZ2xvdy10ZXh0Ij5OZXh0IFVwZGF0ZSBQYXRjaPCflKXwn5SlPC9oMj4KICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LWdyYXktMzAwIHRleHQtc20gbGVhZGluZy1yZWxheGVkIj4KICAgICAgICAgICAgICAgICAgICBOZXh0IFVwZGF0ZSBpcyBoZXJlLi4uLiBTZWxhbWF0IERhdGFuZyBkaSBhcGxpa2FzaSBWYW5hdGljIEFpIDUuMCwgZGkgcGF0Y2gga2FsaSBpbmkga2l0YSBtZW5naGFkaXJrYW4gYmViZXJhcGEgZml0dXIgZGFuIG1vZGUgYmFydS4gTW9kZW55YSBhZGFsYWgKWyAhIF0gTW9kZSBIZWxwIFdoYXRzYXBwIApbICEgXSBNb2RlIEFzdHJvbm9taSAKWyAhIF0gRWRpYXRvciBHYW1iYXIgCk5haCBJdHUgZGlhIHBlbmFtYmFoYW4gbW9kZSBkaSBWZXJzaW9uIGluaSwgRGkgTmV4dCB1cGRhdGUga2FtaSBha2FuIG1lbmdoYWRpcmthbiB5YW5nIGxlYmloIGJhZ3VzIGxhZ2ksIFRldGFwIHBhbnRhdSB0ZXJ1cyB1bnR1ayB1cGRhdGUgc2VsYW5qdXRueWEuCiAgICAgICAgICAgICAgICA8L3A+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJjbG9zZS13ZWxjb21lLW1vZGFsIiBjbGFzcz0ibXQtNSB3LWZ1bGwgcHktMiB0ZXh0LXdoaXRlIGZvbnQtYm9sZCByb3VuZGVkLWxnIGdsb3ctYnV0dG9uIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7Ij4KICAgICAgICAgICAgICAgICAgICBDb250aW51ZQogICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPCEtLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC0tPgogICAgPCEtLSBTQ1JFRU46IDEwcyBTUExBU0ggU0NSRUVOIChTVEFURV9TUExBU0hfMTBTKSAtLT4KICAgIDwhLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAtLT4KICAgIDxkaXYgaWQ9InNjcmVlbi1zcGxhc2hfMTBzIiBjbGFzcz0ic2NyZWVuIGZpeGVkIGluc2V0LTAgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctYmxhY2sgdHJhbnNpdGlvbi1vcGFjaXR5IGR1cmF0aW9uLTEwMDAgcC00Ij4KICAgICAgICA8IS0tIElubmVyIGNvbnRhaW5lciBpcyBub3cgc21hbGxlciwgd3JhcHBpbmcgdGhlIGNvbnRlbnQgLS0+CiAgICAgICAgPGRpdiBjbGFzcz0icC00IGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdsb3ctYm9yZGVyIG1heC13LWxnIG14LWF1dG8iIHN0eWxlPSJib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLWdsb3cpOyI+CiAgICAgICAgICAgIDwhLS0gQmFubmVyIEltYWdlIChCZXNhciBkYW4gcGFuamFuZykgLS0+CiAgICAgICAgICAgIDxpbWcgaWQ9InNwbGFzaC1iYW5uZXIiIHNyYz0iaHR0cHM6Ly9nLnRvcDR0b3AuaW8vcF8zNTk3aXJxYzgxLmpwZyIgYWx0PSJWYW5hdGljIEFJIEJhbm5lciIgY2xhc3M9InJvdW5kZWQtbGcgbWItNCBvYmplY3QtY29udGFpbiI+CiAgICAgICAgICAgIDwhLS0gVGV4dCAtLT4KICAgICAgICAgICAgPGgxIGNsYXNzPSJ0ZXh0LTR4bCBmb250LWV4dHJhYm9sZCBnbG93LXRleHQgbXQtNCIgc3R5bGU9ImNvbG9yOiB2YXIoLS1jb2xvci1nbG93KTsiPlZhbmF0aWMgQWkgNS4wPC9oMT4KICAgICAgICAgICAgPHAgY2xhc3M9InRleHQtc20gbXQtMiB0ZXh0LWdyYXktNDAwIj5Qb3dlciBCeSA6IEBLeXV6dVN0YXJib3l5IDwvcD4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDwhLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAtLT4KICAgIDwhLS0gU0NSRUVOOiBMT0dJTiAoU1RBVEVfTE9HSU4pIC0tPgogICAgPCEtLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC0tPgogICAgPGRpdiBpZD0ic2NyZWVuLWxvZ2luIiBjbGFzcz0ic2NyZWVuIGZpeGVkIGluc2V0LTAgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00IGhpZGRlbiIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLWJnLWxvZ2luKTsiPgogICAgICAgIDxkaXYgY2xhc3M9InctZnVsbCBtYXgtdy1tZCBwLTYgc206cC04IHJvdW5kZWQteGwgYmctYmxhY2svNTAgYmFja2Ryb3AtYmx1ci1zbSBnbG93LWJvcmRlciI+CiAgICAgICAgICAgIDwhLS0gQmFubmVyIFNlY3Rpb24gLS0+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1iLTYgcC00IGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdsb3ctYm9yZGVyIiBzdHlsZT0iYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1nbG93KTsiPgogICAgICAgICAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vZy50b3A0dG9wLmlvL3BfMzU5N2lycWM4MS5qcGciIGFsdD0iVmFuYXRpYyBBSSBCYW5uZXIiIGNsYXNzPSJ3LTIvMyBoLWF1dG8gcm91bmRlZC1sZyBtYi0yIG9iamVjdC1jb3ZlciI+CiAgICAgICAgICAgICAgICA8aDEgY2xhc3M9InRleHQtM3hsIGZvbnQtZXh0cmFib2xkIGdsb3ctdGV4dCBtdC0yIiBzdHlsZT0iY29sb3I6IHZhcigtLWNvbG9yLWdsb3cpOyI+VmFuYXRpYyBBaSA1LjA8L2gxPgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDwhLS0gSW5wdXQgRmllbGRzIC0tPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGFjZS15LTQgbWItNiI+CiAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9ImxvZ2luLXVzZXJuYW1lIiBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktMzAwIj5Vc2VybmFtZTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJsb2dpbi11c2VybmFtZSIgcGxhY2Vob2xkZXI9IlVzZXJuYW1lIiBjbGFzcz0idy1mdWxsIG10LTEgcC0zIGJnLWdyYXktODAwIGJvcmRlciBib3JkZXItcHVycGxlLTUwMCByb3VuZGVkLWxnIGZvY3VzOnJpbmctcHVycGxlLTUwMCBmb2N1czpib3JkZXItcHVycGxlLTUwMCBzaGFkb3ctaW5uZXIiIHN0eWxlPSJib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnkpOyBiYWNrZ3JvdW5kLWNvbG9yOiAjMWExYTFhOyI+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0ibG9naW4tYXBpa2V5IiBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktMzAwIj5QYXNzd29yZDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InBhc3N3b3JkIiBpZD0ibG9naW4tYXBpa2V5IiBwbGFjZWhvbGRlcj0iUGFzc3dvcmQiIGNsYXNzPSJ3LWZ1bGwgbXQtMSBwLTMgYmctZ3JheS04MDAgYm9yZGVyIGJvcmRlci1wdXJwbGUtNTAwIHJvdW5kZWQtbGcgZm9jdXM6cmluZy1wdXJwbGUtNTAwIGZvY3VzOmJvcmRlci1wdXJwbGUtNTAwIHNoYWRvdy1pbm5lciIgc3R5bGU9ImJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7IGJhY2tncm91bmQtY29sb3I6ICMxYTFhMWE7Ij4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDwhLS0gTG9naW4gQnV0dG9uIC0tPgogICAgICAgICAgICA8YnV0dG9uIGlkPSJsb2dpbi1idXR0b24iIGNsYXNzPSJ3LWZ1bGwgcHktMyB0ZXh0LXdoaXRlIGZvbnQtYm9sZCByb3VuZGVkLXhsIGdsb3ctYnV0dG9uIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogIzVkMzU5YjsiPgogICAgICAgICAgICAgICAgUmVnaXN0ZXIKICAgICAgICAgICAgPC9idXR0b24+CgogICAgICAgICAgICA8IS0tIFRlbGVncmFtIEJ1dHRvbiAtLT4KICAgICAgICAgICAgPGJ1dHRvbiBpZD0idGVsZWdyYW0tYnV0dG9uIiBjbGFzcz0idy1mdWxsIHB5LTMgbXQtNCBiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCByb3VuZGVkLXhsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGhvdmVyOmJnLWJsdWUtNzAwIHRyYW5zaXRpb24gZHVyYXRpb24tMzAwIj4KICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtdXNlci1wbHVzIG1yLTIiPjwvaT4gSm9pbiBDaGFuZWwgVGVsZWdyYW0KICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8IS0tIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLS0+CiAgICA8IS0tIFNDUkVFTjogOXMgVklERU8gU1BMQVNIIChTVEFURV9TUExBU0hfOVMpIC0tPgogICAgPCEtLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC0tPgogICAgPGRpdiBpZD0ic2NyZWVuLXNwbGFzaF85cyIgY2xhc3M9InNjcmVlbiBmaXhlZCBpbnNldC0wIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLWJsYWNrIHRyYW5zaXRpb24tb3BhY2l0eSBkdXJhdGlvbi0xMDAwIGhpZGRlbiBwLTQiPgogICAgICAgIDwhLS0gTU9ESUZJRUQgQ09OVEFJTkVSIHRvIG1hdGNoIDEwcyBzcGxhc2ggc2l6ZS9zdHlsZSAtLT4KICAgICAgICA8ZGl2IGNsYXNzPSJwLTQgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2xvdy1ib3JkZXIgbWF4LXctbGcgbXgtYXV0byIgc3R5bGU9ImJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItZ2xvdyk7Ij4KICAgICAgICAgICAgPCEtLSBWaWRlbyBCYW5uZXIgLS0+CiAgICAgICAgICAgIDx2aWRlbyBpZD0ibG9naW4tdmlkZW8tc3BsYXNoIiBtdXRlZCBhdXRvcGxheSBsb29wIHBsYXlzaW5saW5lIGNsYXNzPSJ3LWZ1bGwgaC1hdXRvIHJvdW5kZWQtbGcgbWItNCBvYmplY3QtY292ZXIiPgogICAgICAgICAgICAgICAgPCEtLSBTb3VyY2Ugc2V0IGR5bmFtaWNhbGx5IGluIEpTIChoYW5kbGVMb2dpbikgLS0+CiAgICAgICAgICAgIDwvdmlkZW8+CiAgICAgICAgICAgIDwhLS0gVGV4dCAtLT4KICAgICAgICAgICAgPGgxIGNsYXNzPSJ0ZXh0LTN4bCBmb250LWV4dHJhYm9sZCBnbG93LXRleHQgdGV4dC1jZW50ZXIiIHN0eWxlPSJjb2xvcjogdmFyKC0tY29sb3ItZ2xvdyk7Ij5WYW5hdGljIEFpIDUuMDwvaDE+CiAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXNtIG10LTIgdGV4dC1ncmF5LTQwMCI+TWVueWlhcGthbiBTZXJ2ZXIgVW50dWsgQW5kYS4uLjwvcD4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDwhLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAtLT4KICAgIDwhLS0gU0NSRUVOOiBEQVRBIEVOVFJZIChTVEFURV9EQVRBX0VOVFJZKSAtLT4KICAgIDwhLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAtLT4KICAgIDxkaXYgaWQ9InNjcmVlbi1kYXRhX2VudHJ5IiBjbGFzcz0ic2NyZWVuIGZpeGVkIGluc2V0LTAgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00IGhpZGRlbiIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLWJnLWxvZ2luKTsiPgogICAgICAgIDxkaXYgY2xhc3M9InctZnVsbCBtYXgtdy1tZCBwLTYgc206cC04IHJvdW5kZWQteGwgYmctYmxhY2svNTAgYmFja2Ryb3AtYmx1ci1zbSBnbG93LWJvcmRlciI+CiAgICAgICAgICAgIDwhLS0gQmFubmVyIFNlY3Rpb24gKFNhbWUgYXMgbG9naW4pIC0tPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtYi02IHAtNCBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnbG93LWJvcmRlciIgc3R5bGU9ImJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItZ2xvdyk7Ij4KICAgICAgICAgICAgICAgIDxpbWcgc3JjPSJodHRwczovL2cudG9wNHRvcC5pby9wXzM1OTdpcnFjODEuanBnIiBhbHQ9IlZhbmF0aWMgQUkgQmFubmVyIiBjbGFzcz0idy0yLzMgaC1hdXRvIHJvdW5kZWQtbGcgbWItMiBvYmplY3QtY292ZXIiPgogICAgICAgICAgICAgICAgPGgxIGNsYXNzPSJ0ZXh0LTN4bCBmb250LWV4dHJhYm9sZCBnbG93LXRleHQgbXQtMiIgc3R5bGU9ImNvbG9yOiB2YXIoLS1jb2xvci1nbG93KTsiPlZhbmF0aWMgQWkgNS4wPC9oMT4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8IS0tIElucHV0IEZpZWxkcyAtLT4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3BhY2UteS00IG1iLTYiPgogICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJkYXRhLW5hbWEtYWkiIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS0zMDAiPllvdSBOYW1lPzwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJkYXRhLW5hbWEtYWkiIHBsYWNlaG9sZGVyPSJOYW1hIExvIiBjbGFzcz0idy1mdWxsIG10LTEgcC0zIGJnLWdyYXktODAwIGJvcmRlciBib3JkZXItcHVycGxlLTUwMCByb3VuZGVkLWxnIGZvY3VzOnJpbmctcHVycGxlLTUwMCBmb2N1czpib3JkZXItcHVycGxlLTUwMCBzaGFkb3ctaW5uZXIiIHN0eWxlPSJib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnkpOyBiYWNrZ3JvdW5kLWNvbG9yOiAjMWExYTFhOyI+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iZGF0YS11bXVyIiBjbGFzcz0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktMzAwIj5Zb3VyIEFnZT88L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJkYXRhLXVtdXIiIHBsYWNlaG9sZGVyPSJVbXVyIExvIiBjbGFzcz0idy1mdWxsIG10LTEgcC0zIGJnLWdyYXktODAwIGJvcmRlciBib3JkZXItcHVycGxlLTUwMCByb3VuZGVkLWxnIGZvY3VzOnJpbmctcHVycGxlLTUwMCBmb2N1czpib3JkZXItcHVycGxlLTUwMCBzaGFkb3ctaW5uZXIiIHN0eWxlPSJib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnkpOyBiYWNrZ3JvdW5kLWNvbG9yOiAjMWExYTFhOyI+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iZGF0YS1iYmNvaW4iIGNsYXNzPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS0zMDAiPkp1bWxhaCBCQiBDb2luPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iZGF0YS1iYmNvaW4iIHBsYWNlaG9sZGVyPSJCYXRhcyAxMCIgdmFsdWU9IjEwIiBtaW49IjAiIGNsYXNzPSJ3LWZ1bGwgbXQtMSBwLTMgYmctZ3JheS04MDAgYm9yZGVyIGJvcmRlci1wdXJwbGUtNTAwIHJvdW5kZWQtbGcgZm9jdXM6cmluZy1wdXJwbGUtNTAwIGZvY3VzOmJvcmRlci1wdXJwbGUtNTAwIHNoYWRvdy1pbm5lciIgc3R5bGU9ImJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7IGJhY2tncm91bmQtY29sb3I6ICMxYTFhMWE7Ij4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDwhLS0gTmV4dCBCdXR0b24gLS0+CiAgICAgICAgICAgIDxidXR0b24gaWQ9ImRhdGEtbmV4dC1idXR0b24iIGNsYXNzPSJ3LWZ1bGwgcHktMyB0ZXh0LXdoaXRlIGZvbnQtYm9sZCByb3VuZGVkLXhsIGdsb3ctYnV0dG9uIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogIzVkMzU5YjsiPgogICAgICAgICAgICAgICAgTmV4dCBUbyBBaQogICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDwhLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAtLT4KICAgIDwhLS0gU0NSRUVOOiBDSEFUIChTVEFURV9DSEFUKSAtLT4KICAgIDwhLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAtLT4KICAgIDxkaXYgaWQ9InNjcmVlbi1jaGF0IiBjbGFzcz0ic2NyZWVuIGZpeGVkIGluc2V0LTAgZmxleCBmbGV4LWNvbCBoaWRkZW4iIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1iZy1kYXJrKTsiPgogICAgICAgIAogICAgICAgIDwhLS0gVE9QIFNFQ1RJT046IFZpZGVvIEJhbm5lciBhbmQgU3RhdHVzIEluZm8gKEZJWEVEKSAtLT4KICAgICAgICA8ZGl2IGNsYXNzPSJ3LWZ1bGwgcmVsYXRpdmUgc2hhZG93LWxnIGZsZXgtc2hyaW5rLTAiIHN0eWxlPSJoZWlnaHQ6IDE1cmVtOyI+CiAgICAgICAgICAgIDwhLS0gVmlkZW8gQmFubmVyIChmdWxsIHdpZHRoIGFuZCBoZWlnaHQgb2YgdGhpcyBjb250YWluZXIpIC0tPgogICAgICAgICAgICA8dmlkZW8gaWQ9InZpZGVvLWJhbm5lci1jaGF0IiBtdXRlZCBhdXRvcGxheSBsb29wIHBsYXlzaW5saW5lIGNsYXNzPSJ3LWZ1bGwgaC1mdWxsIG9iamVjdC1jb3ZlciI+CiAgICAgICAgICAgICAgICA8IS0tIFNvdXJjZSBzZXQgZHluYW1pY2FsbHkgaW4gSlMgKHNldFNjcmVlbikgLS0+CiAgICAgICAgICAgIDwvdmlkZW8+CiAgICAgICAgICAgIAogICAgICAgICAgICA8IS0tIE92ZXJsYXkgSW5mbyAtLT4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWJzb2x1dGUgaW5zZXQtMCBwLTMgZmxleCBmbGV4LWNvbCBqdXN0aWZ5LWJldHdlZW4gYmctZ3JhZGllbnQtdG8tYiBmcm9tLWJsYWNrLzgwIHRvLXRyYW5zcGFyZW50Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciB3LWZ1bGwiPgogICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzcz0idGV4dC0zeGwgZm9udC1leHRyYWJvbGQgdGV4dC13aGl0ZSI+VmFuYXRpYyBBaSA1LjA8L2gxPgogICAgICAgICAgICAgICAgICAgIDwhLS0gVVBEQVRFRDogVG9tYm9sIExvZ291dCBtZW5nZ3VuYWthbiB3YXJuYSB1bmd1IChiZy1wdXJwbGUtNjAwKSAtLT4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJsb2dvdXQtYnV0dG9uLXRvcCIgY2xhc3M9InB5LTEgcHgtMyBiZy1wdXJwbGUtNjAwIHRleHQtd2hpdGUgZm9udC1ib2xkIHJvdW5kZWQtbGcgdGV4dC1zbSBob3ZlcjpiZy1wdXJwbGUtNzAwIHRyYW5zaXRpb24gZHVyYXRpb24tMzAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgS2VsdWFyCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPCEtLSBNT0RJRklFRDogU3RhdHVzIEJhciAoTHVydXMgZGFuIFBlbnVoKSAtLT4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InctZnVsbCI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBmbGV4LXdyYXAgaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBwLTIgcm91bmRlZC1sZyBiYWNrZHJvcC1ibHVyLXNtIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjQpOyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGlkPSJpbmZvLXNlcnZlci1zdGF0dXMiIGNsYXNzPSJ0ZXh0LWdyZWVuLTQwMCB0ZXh0LXNtIGZvbnQtbW9ubyBmbGV4LTEgbWluLXctWzMwJV0iPlNlcnZlciBPbmxpbmUgOiAuLi48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggc3BhY2UteC00Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGlkPSJpbmZvLXVzZXItbmFtZSIgY2xhc3M9InRleHQtcHVycGxlLTMwMCB0ZXh0LXNtIGZvbnQtbW9ubyI+VXNlciA6IC4uLjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGlkPSJpbmZvLXBlbmdndW5hLXR5cGUiIGNsYXNzPSJ0ZXh0LXJlZC00MDAgdGV4dC1zbSBmb250LW1vbm8iPlBlbmdndW5hIDogLi4uPC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBNSURETEUgU0VDVElPTjogQ2hhdCBBcmVhIChTQ1JPTExBQkxFKSAtLT4KICAgICAgICA8ZGl2IGlkPSJjaGF0LXNjcm9sbC13cmFwcGVyIiBjbGFzcz0iZmxleC1ncm93IG92ZXJmbG93LXktYXV0byBwLTQiPgogICAgICAgICAgICA8ZGl2IGlkPSJjaGF0LW1lc3NhZ2VzIiBjbGFzcz0iZmxleCBmbGV4LWNvbCI+CiAgICAgICAgICAgICAgICA8IS0tIENoYXQgbWVzc2FnZXMgd2lsbCBiZSBhcHBlbmRlZCBoZXJlIGJ5IEpTIC0tPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBCT1RUT00gU0VDVElPTjogSW5wdXQgQXJlYSAoRklYRUQpIC0tPgogICAgICAgIDxkaXYgaWQ9ImNoYXQtaW5wdXQtZml4ZWQtYmFyIiBjbGFzcz0idy1mdWxsIHAtNCBwdC0wIGZsZXgtc2hyaW5rLTAiPgoKICAgICAgICAgICAgPCEtLSBUeXBpbmcgSW5kaWNhdG9yIChGSVhFRCBBQk9WRSBJTlBVVCkgLS0+CiAgICAgICAgICAgIDxkaXYgaWQ9InR5cGluZy1pbmRpY2F0b3IiIGNsYXNzPSJ0ZXh0LXhzIHRleHQtZ3JheS00MDAgbWItMSBwbC0yIGhpZGRlbiI+CiAgICAgICAgICAgICAgICBWYW5hdGljIEFpIFNlZGFuZyBNZW5nZXRpay4uLi4uCiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAKICAgICAgICAgICAgPCEtLSBGaWxlIE5hbWUgRGlzcGxheSAoTkVXKSAtLT4KICAgICAgICAgICAgPGRpdiBpZD0iZmlsZS1uYW1lLWRpc3BsYXkiIGNsYXNzPSJoaWRkZW4gaXRlbXMtY2VudGVyIHRleHQteHMgdGV4dC1wdXJwbGUtNDAwIGJnLWdyYXktODAwIHAtMiByb3VuZGVkLXQtbGcgbWItWy0xcHhdIj4KICAgICAgICAgICAgICAgICA8aSBjbGFzcz0icGgtZmlsZS1pbWFnZS1maWxsIG1yLTEgdGV4dC1iYXNlIj48L2k+IDwhLS0gSWNvbiBmaWxlIC0tPgogICAgICAgICAgICAgICAgIDxzcGFuPk5hbWEgRmlsZSAoU2lhcCk8L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPCEtLSBJbnB1dCBGb3JtIC0tPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJyZWxhdGl2ZSBmbGV4IGl0ZW1zLWNlbnRlciBwLTMgcm91bmRlZC14bCBnbG93LWJvcmRlciIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICMxYTFhMWE7IGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImlucHV0LWJnIj48L2Rpdj4gPCEtLSBDdXN0b20gYmFja2dyb3VuZCBpbWFnZSAtLT4KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJmaWxlLXVwbG9hZC1pbnB1dCIgYWNjZXB0PSJpbWFnZS8qIiBjbGFzcz0iaGlkZGVuIj4KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPCEtLSBUb21ib2wgSWNvbiBLaXJpbSBGb3RvIC8gUGxheSBMYWd1IChORVcgVG9nZ2xlIExvZ2ljIGluIEpTKSAtLT4KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9Im1lZGlhLXRvZ2dsZS1idXR0b24iIGNsYXNzPSJwLTIgdGV4dC1wdXJwbGUtMzAwIGhvdmVyOnRleHQtd2hpdGUgdHJhbnNpdGlvbiBkdXJhdGlvbi0yMDAgZ2xvdy1idXR0b24gcm91bmRlZC1mdWxsIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogcmdiYSgxMzgsIDQzLCAyMjYsIDAuMik7Ij4KICAgICAgICAgICAgICAgICAgICA8aSBpZD0ibWVkaWEtYnV0dG9uLWljb24iIGNsYXNzPSJwaC1pbWFnZS1zcXVhcmUtZmlsbCB0ZXh0LTJ4bCI+PC9pPgogICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iY2hhdC1pbnB1dCIgcGxhY2Vob2xkZXI9IllvdXIgTWVzc2FnZS4uLi7imJjvuI8iIGNsYXNzPSJmbGV4LWdyb3cgcC0yIG14LTMgYmctdHJhbnNwYXJlbnQgdGV4dC13aGl0ZSBmb2N1czpvdXRsaW5lLW5vbmUiIC8+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9InNlbmQtYnV0dG9uIiBjbGFzcz0icC0zIGJnLXB1cnBsZS03MDAgcm91bmRlZC1mdWxsIHRleHQtd2hpdGUgZ2xvdy1idXR0b24iIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjNWQzNTliOyI+CiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9InBoLXBhcGVyLXBsYW5lLXRpbHQtZmlsbCB0ZXh0LXhsIj48L2k+CiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CjwvYm9keT4KPC9odG1sPg=='))));</script>
